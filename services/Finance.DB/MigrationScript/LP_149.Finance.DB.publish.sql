/*
Deployment script for FundAccounting

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "FundAccounting"
:setvar DefaultFilePrefix "FundAccounting"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET TEMPORAL_HISTORY_RETENTION ON 
            WITH ROLLBACK IMMEDIATE;
    END


GO
PRINT N'Dropping unnamed constraint on [dbo].[current_journal_full]...';


GO
ALTER TABLE [dbo].[current_journal_full] DROP CONSTRAINT [DF__current_j__is_ac__7DCDAAA2];


GO
PRINT N'Altering [dbo].[cost_basis]...';


GO
ALTER TABLE [dbo].[cost_basis]
    ADD [dividend]             NUMERIC (22, 9) DEFAULT 0 NULL,
        [dividend_withholding] NUMERIC (22, 9) DEFAULT 0 NULL,
        [dividend_net]         NUMERIC (22, 9) DEFAULT 0 NULL;


GO
PRINT N'Starting rebuilding table [dbo].[current_journal_full]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_current_journal_full] (
    [when]               DATETIME        NULL,
    [event]              VARCHAR (100)   NULL,
    [credit]             NUMERIC (22, 9) NULL,
    [debit]              NUMERIC (22, 9) NULL,
    [local_credit]       NUMERIC (22, 9) NULL,
    [local_debit]        NUMERIC (22, 9) NULL,
    [symbol]             VARCHAR (100)   NULL,
    [security_id]        INT             NULL,
    [quantity]           NUMERIC (22, 9) NULL,
    [id]                 INT             NULL,
    [account_id]         INT             NULL,
    [fx_currency]        VARCHAR (3)     NULL,
    [fund]               VARCHAR (50)    NULL,
    [AccountCategory]    VARCHAR (50)    NULL,
    [AccountType]        VARCHAR (100)   NULL,
    [accountName]        VARCHAR (100)   NULL,
    [accountDescription] VARCHAR (100)   NULL,
    [value]              NUMERIC (22, 9) NULL,
    [source]             VARCHAR (50)    NULL,
    [start_price]        NUMERIC (22, 9) NULL,
    [end_price]          NUMERIC (22, 9) NULL,
    [fxrate]             NUMERIC (22, 9) NULL,
    [is_account_to]      BIT             DEFAULT ((1)) NOT NULL,
    [local_value]        NUMERIC (22, 9) NULL,
    [TradeDate]          DATETIME        NULL,
    [SettleDate]         DATETIME        NULL,
    [TradeId]            VARCHAR (127)   NULL,
    [Action]             VARCHAR (31)    NULL,
    [Status]             VARCHAR (20)    NULL,
    [CustodianCode]      VARCHAR (63)    NULL,
    [SecurityType]       VARCHAR (63)    NULL,
    [Side]               VARCHAR (63)    NULL,
    [TradeCurrency]      VARCHAR (20)    NULL,
    [SettleCurrency]     VARCHAR (20)    NULL
) ON [PRIMARY];

CREATE CLUSTERED INDEX [tmp_ms_xx_index_Ix_current_journal_full_when1]
    ON [dbo].[tmp_ms_xx_current_journal_full]([when] DESC);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[current_journal_full])
    BEGIN
        INSERT INTO [dbo].[tmp_ms_xx_current_journal_full] ([when], [event], [credit], [debit], [symbol], [security_id], [quantity], [id], [account_id], [fx_currency], [fund], [AccountCategory], [AccountType], [accountName], [accountDescription], [value], [source], [start_price], [end_price], [fxrate], [is_account_to], [TradeDate], [SettleDate], [TradeId], [Action], [Status], [CustodianCode], [SecurityType], [Side])
        SELECT   [when],
                 [event],
                 [credit],
                 [debit],
                 [symbol],
                 [security_id],
                 [quantity],
                 [id],
                 [account_id],
                 [fx_currency],
                 [fund],
                 [AccountCategory],
                 [AccountType],
                 [accountName],
                 [accountDescription],
                 [value],
                 [source],
                 [start_price],
                 [end_price],
                 [fxrate],
                 [is_account_to],
                 [TradeDate],
                 [SettleDate],
                 [TradeId],
                 [Action],
                 [Status],
                 [CustodianCode],
                 [SecurityType],
                 [Side]
        FROM     [dbo].[current_journal_full]
        ORDER BY [when] DESC;
    END

DROP TABLE [dbo].[current_journal_full];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_current_journal_full]', N'current_journal_full';

EXECUTE sp_rename N'[dbo].[current_journal_full].[tmp_ms_xx_index_Ix_current_journal_full_when1]', N'Ix_current_journal_full_when', N'INDEX';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [dbo].[current_journal_full].[Ix_current_journal_full_covering_index]...';


GO
CREATE NONCLUSTERED INDEX [Ix_current_journal_full_covering_index]
    ON [dbo].[current_journal_full]([when] ASC, [AccountCategory] ASC, [AccountType] ASC, [fund] ASC, [accountName] ASC)
    INCLUDE([source], [event], [credit], [debit], [symbol], [security_id], [quantity], [id], [account_id], [fx_currency], [accountDescription], [value], [start_price], [end_price], [fxrate], [is_account_to], [TradeDate], [SettleDate], [TradeId], [Action], [Status], [CustodianCode], [SecurityType], [Side]);


GO
PRINT N'Altering [dbo].[journal]...';


GO
ALTER TABLE [dbo].[journal]
    ADD [local_value] DECIMAL (22, 9) DEFAULT 0 NOT NULL;


GO
PRINT N'Altering [dbo].[settings]...';


GO
ALTER TABLE [dbo].[settings]
    ADD [theme] VARCHAR (100) NULL;


GO
PRINT N'Creating [dbo].[configurations]...';


GO
CREATE TABLE [dbo].[configurations] (
    [id]                INT           IDENTITY (1, 1) NOT NULL,
    [created_by]        VARCHAR (100) NOT NULL,
    [created_date]      DATETIME      NOT NULL,
    [last_updated_by]   VARCHAR (100) NULL,
    [last_updated_date] DATETIME      NULL,
    [project]           VARCHAR (100) NULL,
    [user_id]           INT           NOT NULL,
    [uom]               VARCHAR (100) NULL,
    [key]               VARCHAR (100) NOT NULL,
    [value]             VARCHAR (MAX) NOT NULL,
    [description]       VARCHAR (100) NULL,
    [active_flag]       BIT           NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating [dbo].[security_details]...';


GO
CREATE TABLE [dbo].[security_details] (
    [id]                           INT             IDENTITY (1, 1) NOT NULL,
    [security_id]                  INT             NOT NULL,
    [symbol]                       VARCHAR (100)   NOT NULL,
    [created_by]                   VARCHAR (100)   NOT NULL,
    [created_date]                 DATETIME        NOT NULL,
    [last_updated_by]              VARCHAR (100)   NULL,
    [last_updated_date]            DATETIME        NULL,
    [maturity_date]                DATETIME        NULL,
    [valuation_date]               DATETIME        NULL,
    [spread]                       NUMERIC (22, 8) NULL,
    [security_return_description]  VARCHAR (MAX)   NULL,
    [financing_leg]                VARCHAR (MAX)   NULL,
    [financing_end_date]           DATETIME        NULL,
    [financing_payment_date]       DATETIME        NULL,
    [financing_reset_date_type]    VARCHAR (100)   NULL,
    [financing_reset_date]         VARCHAR (200)   NULL,
    [next_financing_end_date_type] VARCHAR (100)   NULL,
    [next_financing_end_date]      VARCHAR (200)   NULL,
    [fixed_rate]                   NUMERIC (22, 8) NULL,
    [dcc_fixed_rate]               VARCHAR (100)   NULL,
    [floating_rate]                VARCHAR (100)   NULL,
    [dcc_floating_rate]            VARCHAR (100)   NULL,
    [primary_market]               VARCHAR (200)   NULL,
    [reference_equity]             NUMERIC (22, 8) NULL,
    [reference_obligation]         NUMERIC (22, 8) NULL,
    [upfront]                      NUMERIC (22, 8) NULL,
    [premium_rate]                 NUMERIC (22, 8) NULL,
    [premium_frequency]            NUMERIC (22, 8) NULL,
    [active_flag]                  BIT             NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating [dbo].[stock_splits]...';


GO
CREATE TABLE [dbo].[stock_splits] (
    [id]                INT             IDENTITY (1, 1) NOT NULL,
    [created_by]        VARCHAR (100)   NOT NULL,
    [created_date]      DATETIME        NOT NULL,
    [last_updated_by]   VARCHAR (100)   NULL,
    [last_updated_date] DATETIME        NULL,
    [symbol]            VARCHAR (100)   NOT NULL,
    [notice_date]       DATETIME        NULL,
    [execution_date]    DATETIME        NULL,
    [top_ratio]         NUMERIC (18, 9) NOT NULL,
    [bottom_ratio]      NUMERIC (18, 9) NOT NULL,
    [adjustment_factor] NUMERIC (18, 9) NOT NULL,
    [active_flag]       BIT             NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating [dbo].[stock_splits_audit_trail]...';


GO
CREATE TABLE [dbo].[stock_splits_audit_trail] (
    [id]                INT             IDENTITY (1, 1) NOT NULL,
    [stock_split_id]    INT             NOT NULL,
    [created_by]        VARCHAR (100)   NOT NULL,
    [created_date]      DATETIME        NOT NULL,
    [last_updated_by]   VARCHAR (100)   NULL,
    [last_updated_date] DATETIME        NULL,
    [symbol]            VARCHAR (100)   NOT NULL,
    [notice_date]       DATETIME        NULL,
    [execution_date]    DATETIME        NULL,
    [top_ratio]         NUMERIC (18, 9) NOT NULL,
    [bottom_ratio]      NUMERIC (18, 9) NOT NULL,
    [adjustment_factor] NUMERIC (18, 9) NOT NULL,
    [active_flag]       BIT             NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating unnamed constraint on [dbo].[configurations]...';


GO
ALTER TABLE [dbo].[configurations]
    ADD DEFAULT 1 FOR [active_flag];


GO
PRINT N'Creating unnamed constraint on [dbo].[security_details]...';


GO
ALTER TABLE [dbo].[security_details]
    ADD DEFAULT 1 FOR [active_flag];


GO
PRINT N'Creating unnamed constraint on [dbo].[stock_splits]...';


GO
ALTER TABLE [dbo].[stock_splits]
    ADD DEFAULT 1 FOR [active_flag];


GO
PRINT N'Creating unnamed constraint on [dbo].[stock_splits_audit_trail]...';


GO
ALTER TABLE [dbo].[stock_splits_audit_trail]
    ADD DEFAULT 1 FOR [active_flag];


GO
PRINT N'Creating [dbo].[FK_stock_splits_audit_trail_To_stock_splits]...';


GO
ALTER TABLE [dbo].[stock_splits_audit_trail] WITH NOCHECK
    ADD CONSTRAINT [FK_stock_splits_audit_trail_To_stock_splits] FOREIGN KEY ([stock_split_id]) REFERENCES [dbo].[stock_splits] ([id]);


GO
PRINT N'Creating [dbo].[stock_split_update_trigger]...';


GO
CREATE TRIGGER [stock_split_update_trigger]
	ON [stock_splits]
	AFTER UPDATE
	AS
	BEGIN
	INSERT INTO [stock_splits_audit_trail]
           ([stock_split_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[symbol]
           ,[notice_date]
           ,[execution_date]
           ,[top_ratio]
           ,[bottom_ratio]
           ,[adjustment_factor]
           ,[active_flag])
	select * from deleted
	END
GO
PRINT N'Creating [dbo].[stock_split_insert_trigger]...';


GO
CREATE TRIGGER [stock_split_insert_trigger]
	ON [stock_splits]
	AFTER INSERT
	AS
	BEGIN
	INSERT INTO [stock_splits_audit_trail]
           ([stock_split_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[symbol]
           ,[notice_date]
           ,[execution_date]
           ,[top_ratio]
           ,[bottom_ratio]
           ,[adjustment_factor]
           ,[active_flag])
	select * from inserted
	END
GO
PRINT N'Creating [dbo].[cash_dividend_insert_trigger]...';


GO
CREATE TRIGGER [cash_dividend_insert_trigger]
	ON [dbo].[cash_dividends]
	AFTER INSERT
	AS
	BEGIN
		INSERT INTO [cash_dividends_audit_trail]
           ([cash_dividend_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[symbol]
           ,[notice_date]
           ,[execution_date]
           ,[record_date]
           ,[pay_date]
           ,[rate]
           ,[currency]
           ,[withholding_rate]
           ,[fx_rate]
           ,[active_flag])
		select * from inserted
	END
GO
PRINT N'Creating [dbo].[cash_dividend_update_trigger]...';


GO
CREATE TRIGGER [cash_dividend_update_trigger]
	ON [dbo].[cash_dividends]
	AFTER UPDATE
	AS
	BEGIN
	INSERT INTO [cash_dividends_audit_trail]
           ([cash_dividend_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[symbol]
           ,[notice_date]
           ,[execution_date]
           ,[record_date]
           ,[pay_date]
           ,[rate]
           ,[currency]
           ,[withholding_rate]
           ,[fx_rate]
           ,[active_flag])
		select * from deleted
	END
GO
PRINT N'Refreshing [dbo].[vwCostBasis]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vwCostBasis]';


GO
PRINT N'Altering [dbo].[vwPositions]...';


GO
/*
select * from vwPositions where business_date = '2020-01-09'
and Dividend != 0
order by business_date

where Dividend
!= 0
*/

ALTER VIEW [dbo].[vwPositions]
AS

SELECT cb.business_date, t.Fund, t.ParentPortfolioCode, t.PortfolioCode, t.Strategy, t.SubStrategy AS sub_strategy, t.CustodianCode AS custodian_code, t.SecurityId, tls.symbol, tls.side,t.SettleCurrency currency,   
SUM(tls.investment_at_cost + COALESCE (tl.investment_at_cost, 0)) * - 1 AS Balance, 
SUM(tls.original_quantity + COALESCE (tl.quantity, 0)) AS Quantity, 
MAX(COALESCE (mp.price, 0))*MAX(COALESCE (tls.fx_rate, 0))*SUM(nullif(s.isEquity | s.isSwap,0) * tls.original_quantity + COALESCE (tl.quantity, 0))  AS market_value,
SUM(cb.realized_pnl) AS realized_pnl,   
SUM(cb.unrealized_pnl) AS unrealized_pnl, 
SUM(cb.realized_pnl_fx) AS realized_pnl_fx, 
SUM(cb.unrealized_pnl_fx) AS unrealized_pnl_fx, 
SUM(cb.realized_pnl) + SUM(cb.unrealized_pnl) + SUM(cb.realized_pnl_fx) + SUM(cb.unrealized_pnl_fx) AS net_pnl, 
SUM(cb.realized_pnl) + SUM(cb.realized_pnl_fx) AS total_realized_pnl, 
SUM(cb.unrealized_pnl) + SUM(cb.unrealized_pnl_fx) AS total_unrealized_pnl, 
MAX(COALESCE (cb.cost_basis, 0)) AS cost_basis, 
0 as UnitCostLocal,
0 as CostLocal,
0 as CostBook,
MAX(COALESCE (mp.price, 0)) AS eod_price, 
MAX(COALESCE (tls.fx_rate, 0)) AS eod_fx_rate,
SUM(COALESCE (cb.dividend_net, 0)) as Dividend,
0 as Interest,
0 as Other,
SUM(cb.realized_pnl) + SUM(cb.unrealized_pnl) + SUM(cb.realized_pnl_fx) + SUM(cb.unrealized_pnl_fx) AS pnl 
FROM dbo.tax_lot_status AS tls 
INNER JOIN dbo.cost_basis AS cb ON cb.symbol = tls.symbol AND tls.business_date <= cb.business_date 
LEFT OUTER JOIN dbo.tax_lot AS tl ON tl.open_lot_id = tls.open_id AND tl.trade_date <= cb.business_date 
INNER JOIN TradeMaster.dbo.Trade AS t ON t.LPOrderId = tls.open_id 
INNER JOIN SecurityMaster.dbo.Security AS s ON s.SecurityId = t.SecurityId 
LEFT OUTER JOIN dbo.market_prices AS mp ON mp.symbol = s.EzeTicker AND mp.business_date = cb.business_date
GROUP BY 
	cb.business_date, 
	tls.symbol, 
	t.Fund, 
	t.ParentPortfolioCode, 
	t.PortfolioCode, 
	t.Strategy, 
	t.SubStrategy, 
	t.CustodianCode, 
	t.SecurityId, 
	tls.side ,
	t.SettleCurrency
GO
PRINT N'Refreshing [dbo].[vwTaxLots]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vwTaxLots]';


GO
PRINT N'Altering [dbo].[vwFullJournal]...';


GO
/*
select distinct LongShort from vwFullJournal

Requires that the CacheResults sp is run first to populate the two tables, current_XXXXX
*/
ALTER VIEW [dbo].[vwFullJournal]
	AS 

select *, 
case
	when AccountType in ('Settled Cash') then 'LONG'
	when Side in ('BUY', 'SELL') then 'LONG'
	when Side in ('SHORT', 'COVER') then 'SHORT'
	else 'NonTrading'
end as LongShort
from current_journal_full
GO
PRINT N'Altering [dbo].[vwJournal]...';


GO
/*
select top 100 * from vwJournal
*/
ALTER VIEW [dbo].[vwJournal]
	AS 
                            SELECT 
                                    [when],
                                    [event],
                                    (CASE 
										WHEN [account_category].[name] in ('Asset', 'Expenses') and value < 0  THEN ABS(value) 
                                        WHEN [account_category].[name] not in ('Asset', 'Expenses') and value > 0  THEN ABS(value) 
										Else 0
										END  ) credit,
                                    (CASE 
										WHEN [account_category].[name] in ('Asset','Expenses') and value > 0  THEN ABS(value) 
                                        WHEN [account_category].[name] not in ('Asset','Expenses') and value < 0  THEN ABS(value) 
										Else 0
										END  ) debit,

                                    (CASE 
										WHEN [account_category].[name] in ('Asset', 'Expenses') and local_value < 0  THEN ABS(local_value) 
                                        WHEN [account_category].[name] not in ('Asset', 'Expenses') and local_value > 0  THEN ABS(local_value) 
										Else 0
										END  ) local_credit,
                                    (CASE 
										WHEN [account_category].[name] in ('Asset','Expenses') and local_value > 0  THEN ABS(local_value) 
                                        WHEN [account_category].[name] not in ('Asset','Expenses') and local_value < 0  THEN ABS(local_value) 
										Else 0
										END  ) local_debit,
									[journal].[symbol],
									[journal].[security_id],
									[journal].[quantity],
                                    [journal].[id],
                                    [account_id],
                                    [fx_currency],
                                    [fund],
                                    [account_category].[name] as AccountCategory,  
                                    [account_type].[name] as AccountType,
									[account].[name] as accountName, -- Changed to CamelCase
									[account].[description] as accountDescription, -- Changed to CamelCase
                                    [value],
                                    [source],
                                    [start_price],
                                    [end_price],
									[fxrate],
									[is_account_to],
									[local_value]
                                    FROM [journal] with(nolock) 
                        join account with(nolock)  on [journal]. [account_id] = account.id 
                        join [account_type] with(nolock) on  [account].account_type_id = [account_type].id
                        join [account_category] with(nolock) on  [account_type].account_category_id = [account_category].id
GO
PRINT N'Altering [dbo].[vwWorkingJournals]...';


GO
/*
select distinct PositionDirection  from [vwWorkingJournals]
*/
ALTER VIEW [dbo].[vwWorkingJournals]
	AS 

select vw.*, 
	t.TradeDate,
	t.SettleDate,
	t.TradeId, 
	t.Action, 
	t.Status, 
	t.CustodianCode, 
	t.SecurityType,
	t.Side,
	case 
		when t.Side = 'BUY' then 'LONG' 
		else 'SHORT'
	end as PositionDirection
from vwJournal vw
left outer join current_trade_state t on t.LpOrderId = vw.source
GO
PRINT N'Altering [dbo].[vwCurrentStateTrades]...';


GO
/*    
Examples of usage    
    
select TradeTime, ParentSymbol, TradeDate, SettleDate, LocalDividendPerShare, WithholdingRate, Side, TradeCurrency,SettleCurrency, * from vwCurrentStateTrades where SecurityType = 'Journals' and Symbol = 'ZZ_CASH_DIVIDENDS'
*/    

ALTER VIEW [dbo].[vwCurrentStateTrades]    
 AS   
select    
 t1.LPOrderId, t1.AccrualId,  t1.Action, coalesce(s.EzeTicker, t1.Symbol) as Symbol, t1.Side, t1.Quantity, t1.TimeInForce,     
 t1.OrderType, t1.SecurityType,  t1.BloombergCode, s.EzeTicker, s.SecurityCode,    
 t1.CustodianCode, t1.ExecutionBroker, t1.TradeId,      
    t1.SecurityId,    
 t1.Fund, t1.PMCode, t1.PortfolioCode, t1.Trader,     
 t1.TradeCurrency, t1.TradePrice, t1.TradeDate,     
 t1.SettleCurrency, t1.SettlePrice, t1.SettleDate,     
 t1.TradeType,    
    t1.TransactionCategory,    
    t1.TransactionType,    
    t1.ParentOrderId,    
    Coalesce(t1.ParentSymbol, '') as ParentSymbol,    
 t1.Status,     
 t1.NetMoney,t1.Commission, t1.Fees,     
 t1.SettleNetMoney, t1.NetPrice, t1.SettleNetPrice,    
 -- OrderedQuantity, FilledQuantity,RemainingQuantity,    
 t1.OrderSource,    
 t1.UpdatedOn,     
 COALESCE(t1.LocalNetNotional,0) as LocalNetNotional,
 t1.TradeTime
from TradeMaster..trade t1 inner join TradeMaster..trade t2 on t1.OriginalTradeId = t2.LPOrderId     
left outer join SecurityMaster..Security s on s.SecurityId = t1.SecurityId    
where  t1.LinkedTradeId is null     
and t1. IsBrokerLegTrade = 0    
and t1.IsBrokerTrade = 0 
and t1.Quantity != 0  
and t1.Action not in ('Delete')   
union all    
   select    
t.LPOrderId, t.AccrualId,  t.Action, coalesce(s.EzeTicker, t.Symbol) as Symbol, t.Side, t.Quantity, t.TimeInForce, t.OrderType, t.SecurityType,  t.BloombergCode, s.EzeTicker, s.SecurityCode,    
 t.CustodianCode, t.ExecutionBroker, t.TradeId,      
    t.SecurityId,    
 t.Fund, t.PMCode, t.PortfolioCode, t.Trader,     
 t.TradeCurrency, t.TradePrice, t.TradeDate,     
 t.SettleCurrency, t.SettlePrice, t.SettleDate,     
 t.TradeType,    
    t.TransactionCategory,    
    t.TransactionType,    
    t.ParentOrderId,    
    Coalesce(t.ParentSymbol, '') as ParentSymbol,    
 t.Status,     
 t.NetMoney,t.Commission, t.Fees,     
 t.SettleNetMoney, t.NetPrice, t.SettleNetPrice,    
 -- OrderedQuantity, FilledQuantity,RemainingQuantity,    
 t.OrderSource,    
 t.UpdatedOn,     
 COALESCE(t.LocalNetNotional,0) as LocalNetNotional,
 t.TradeTime
from TradeMaster..trade t left join TradeMaster..trade A on A.AdminOrderId = t.LPOrderId    
left outer join SecurityMaster..Security s on s.SecurityId = t.SecurityId    
where t.OriginalTradeId  is null and t.LinkedTradeId is null     
-- and CONVERT(date, TradeDate, 101) BETWEEN CONVERT(date, @StartDate, 101) AND CONVERT(date, @EndDate, 101)     
and t.IsBrokerLegTrade = 0    
and t.IsBrokerTrade = 0   
and t.IsHistorical = 0
and A.AdminOrderId is null
and t.Quantity != 0 
and t.Action not in ('Delete') 
-- Journals
union all    
   select    
t.LPOrderId, t.AccrualId,  t.Action, coalesce(s.EzeTicker, t.Symbol) as Symbol, t.Side, t.Quantity, t.TimeInForce, t.OrderType, t.SecurityType,  t.BloombergCode, s.EzeTicker, s.SecurityCode,    
 t.CustodianCode, t.ExecutionBroker, t.TradeId,      
    t.SecurityId,    
 t.Fund, t.PMCode, t.PortfolioCode, t.Trader,     
 t.TradeCurrency, t.TradePrice, t.TradeDate,     
 t.SettleCurrency, t.SettlePrice, t.SettleDate,     
 t.TradeType,    
    t.TransactionCategory,    
    t.TransactionType,    
    t.ParentOrderId,    
    Coalesce(t.ParentSymbol, '') as ParentSymbol,    
 t.Status,     
 t.NetMoney,t.Commission, t.Fees,     
 t.SettleNetMoney, t.NetPrice, t.SettleNetPrice,    
 -- OrderedQuantity, FilledQuantity,RemainingQuantity,    
 t.OrderSource,    
 t.UpdatedOn,     
 COALESCE(t.LocalNetNotional,0) as LocalNetNotional,
 t.TradeTime
from TradeMaster..trade t left join TradeMaster..trade A on A.AdminOrderId = t.LPOrderId    
left outer join SecurityMaster..Security s on s.SecurityId = t.SecurityId    
where t.OriginalTradeId  is null and t.LinkedTradeId is null     
-- and CONVERT(date, TradeDate, 101) BETWEEN CONVERT(date, @StartDate, 101) AND CONVERT(date, @EndDate, 101)     
and t.IsBrokerLegTrade = 0    
and t.IsBrokerTrade = 0   
and t.IsHistorical = 0
and A.AdminOrderId is null
and (t.Quantity = 0 and t.SecurityType in ('Journals'))
and t.Action not in ('Delete')
GO
PRINT N'Altering [dbo].[vwDividendDetails]...';


GO
ALTER VIEW vwDividendDetails
AS
select t.fund,
d.id,
t.symbol,
t.quantity,
t.fx_rate,
d.currency,
d.execution_date,
abs(t.quantity * d.rate) as base_gross_dividend,
abs(t.quantity * d.rate) * (d.withholding_rate /100) as base_withholding_amount,
abs(t.quantity * d.rate) + (abs(t.quantity * d.rate) * (d.withholding_rate /100)) as base_net_dividend,
abs(t.quantity * d.rate) * d.fx_rate as settlement_gross_dividend,
abs(t.quantity * d.rate) * (d.withholding_rate /100) * d.fx_rate as settlement_withholdings_amount,
abs(t.quantity * d.rate) * d.fx_rate * d.fx_rate as settlement_local_net_dividend
from tax_lot_status t
inner join cash_dividends d on t.symbol = d.symbol
and d.active_flag = 1
and d.execution_date <= GETDATE()
and t.trade_date <= d.execution_date
and (t.status = 'open' or t.status = 'partially closed') 
and (t.side = 'buy' or t.side = 'short')
GO
PRINT N'Creating [dbo].[vwStockSplitDetails]...';


GO
CREATE VIEW [dbo].[vwStockSplitDetails]
	AS
select t.fund,
s.id,
t.symbol,
t.quantity as pre_split_quantity,
(t.quantity * s.bottom_ratio) / s.top_ratio as post_split_quantity,
0 as cost_basis_pre_split,
0 as cost_basis_post_split,
0 as pre_split_investment_at_cost,
0 as post_split_investment_at_cost
from tax_lot_status t
inner join stock_splits s on t.symbol = s.symbol
and s.active_flag = 1
and s.execution_date <= GETDATE()
and t.trade_date <= s.execution_date
and (t.status = 'open' or t.status = 'partially closed') 
and (t.side = 'buy' or t.side = 'short')
GO
PRINT N'Creating [dbo].[fnSide]...';


GO
/*
select dbo.fnSide('BUY') as side
*/
CREATE FUNCTION fnSide(
    @side varchar(20)
)
RETURNS varchar(20)
AS 
BEGIN
	
declare @result varchar(20)
select @result = 
	case 
		when @side = 'BUY' then 'LONG' 
		else 'SHORT'
	end
    RETURN @result
END;
GO
PRINT N'Altering [dbo].[CostBasisCalculation]...';


GO
/* Examples
select * from account_type where name like 'DIV%'
exec CostBasisCalculation '2020-01-10'

select * from cost_basis where business_date = '2019-12-31'
select * from vwCostBasis where business_date = '2019-12-31'
and Symbol = 'EXPR'
order by Symbol asc
*/
ALTER PROCEDURE [dbo].[CostBasisCalculation]
	@businessDate Date,
	@symbol varchar(100) = null
AS

DECLARE @bDate as Date
SET @bDate = @businessDate

SET STATISTICS TIME ON

SET NOCOUNT ON


select id 
into #id_unrealized
from account_type where name in ('CHANGE IN UNREALIZED GAIN/(LOSS)', 'Change in Unrealized Derivatives Contracts at Fair Value', 'Change in Unrealized Derivatives Contracts due to FX Translation', 'change in unrealized do to fx translation')

RAISERROR('CostBasisCalculation', 0, 1) with nowait

select SecurityCode, BbergCode, coalesce(sd.Multiplier, sf.ContractSize) as Multiplier 
into #security_details
from SecurityMaster..Security s with(nolock)
left join SecurityMaster..SecDerivatives sd on sd.SecurityId = s.SecurityId
left join SecurityMaster..SecFutures sf on sf.SecurityId = s.SecurityId
where coalesce(sd.Multiplier, sf.ContractSize) is not null

RAISERROR('Completed #security_details', 0, 1) with nowait

select @bDate as business_date, open_id, tls.symbol, tls.side, t.TradeCurrency, SUM(original_quantity) as quantity, SUM(original_quantity * trade_price) as investment_at_cost
into #tax_lot_status
from tax_lot_status tls with(nolock)
inner join current_trade_state t on t.lpOrderId = open_id
where trade_date <= @bDate
group by open_id, tls.symbol, tls.side, t.TradeCurrency

RAISERROR('Completed #tax_lot_status', 0, 1) with nowait

select @bDate as business_date, open_lot_id, sum(abs(quantity)) as quantity, sum(abs(quantity * trade_price)) as investment_at_cost
into #tax_lot
from tax_lot 
where trade_date <= @bDate
group by open_lot_id

RAISERROR('Completed #tax_lot', 0, 1) with nowait

select tls.business_date, tls.symbol, dbo.fnSide(tls.Side) as side,
Abs(coalesce(tls.quantity,0)) as totalQuantity, 
Abs(coalesce(tl.quantity,0)) as consumedQuantity, 
Abs(coalesce(tls.quantity,0)) - Abs(coalesce(tl.quantity,0)) as quantity,
case
	when TradeCurrency = 'GBX' or TradeCurrency = 'GBp' then (Abs(coalesce(tls.quantity,0)) - Abs(coalesce(tl.quantity,0))) * coalesce(mp.price,0) / 100.0 
	--else (Abs(coalesce(tls.quantity,0)) - Abs(coalesce(tl.quantity,0))) * coalesce(mp.price,1) 
	else (Abs(coalesce(tls.investment_at_cost,0)) - Abs(coalesce(tl.investment_at_cost,0)))
end as investment_at_cost,
case
	when TradeCurrency = 'GBX' or TradeCurrency = 'GBp' then coalesce(mp.price,0) / 100.0 
	else coalesce(mp.price,0) 
end as market_price
into #tax_lots_final
from #tax_lot_status tls
left outer join market_prices mp on mp.business_date = @bDate and mp.symbol = tls.symbol
left outer join #tax_lot tl on tl.open_lot_id = tls.open_id
order by tls.symbol

RAISERROR('Completed #tax_lots_final', 0, 1) with nowait

select 
@bDate as busdate,
tls.symbol, 
CASE
	WHEN tls.side = 'BUY' then ABS(SUM(tls.investment_at_cost))
	ELSE ABS(SUM(tls.investment_at_cost)) * -1
End as Balance,
SUM(tls.quantity) as Quantity, 
tls.side,
MAX(market_price) as eod_price
into #costbasis_all
from #tax_lots_final tls
left outer join #security_details sd on sd.SecurityCode = tls.symbol
where tls.business_date <= @bDate
group by tls.symbol, side

select '#costbasis_all', * from #costbasis_all where symbol = @symbol

RAISERROR('Completed #costbasis_all', 0, 1) with nowait

SELECT @bDate as busdate, J.symbol, j.SecurityType, j.LongShort as side,sum(credit-debit) as unrealized_pnl
into #unrealized_pnl
FROM vwFullJournal j
where
AccountType in ('CHANGE IN UNREALIZED GAIN/(LOSS)', 'Change in Unrealized Derivatives Contracts at Fair Value', 'Change in Unrealized Derivatives Contracts due to FX Translation', 'change in unrealized do to fx translation')
and j.[when] <= @bDate
group by j.symbol, j.LongShort ,j.SecurityType
order by j.Symbol

select '#unrealized_pnl', * from #unrealized_pnl where symbol = @symbol

RAISERROR('Completed #unrealized_pnl', 0, 1) with nowait

SELECT @bDate as busdate, J.symbol, j.SecurityType, j.LongShort as side, sum(credit - debit) as unrealized_pnl_fx
into #unrealized_pnl_fx
FROM vwFullJournal j
where 
AccountType in ('Change in unrealized due to fx on original Cost', 'change in unrealized do to fx translation')
and j.[when] <= @bDate
group by j.symbol, j.LongShort,j.SecurityType
order by j.Symbol

select '#unrealized_pnl_fx', * from #unrealized_pnl_fx where symbol = @symbol

RAISERROR('Completed #unrealized_pnl_fx', 0, 1) with nowait

SELECT @bDate as busdate, J.symbol, j.SecurityType, j.LongShort as side, sum(credit - debit) as realized_pnl
into #realized_pnl
FROM vwFullJournal j
where 
AccountType in ('REALIZED GAIN/(LOSS)')
and j.[when] <= @bDate
group by j.symbol, j.LongShort ,j.SecurityType
order by j.Symbol

select '#realized_pnl', * from #realized_pnl where symbol = @symbol

RAISERROR('Completed #realized_pnl', 0, 1) with nowait

SELECT @bDate as busdate, J.symbol, j.SecurityType, j.LongShort as side, sum(credit - debit) as realized_pnl_fx
into #realized_pnl_fx
FROM vwFullJournal j
where 
AccountType in ('REALIZED GAIN/(LOSS) DUE TO FX')
and j.[when] <= @bDate
group by j.symbol, j.LongShort,j.SecurityType
order by j.Symbol

select '#realized_pnl_fx', * from #realized_pnl_fx where symbol = @symbol

RAISERROR('Completed #realized_pnl_fx', 0, 1) with nowait

SELECT @bDate as busdate, J.symbol, j.SecurityType, j.LongShort as side, sum(credit - debit) as balance
into #dividend
FROM vwFullJournal j
where 
AccountType in ('DIVIDEND EXPENSE', 'DIVIDEND INCOME')
and j.[when] <= @bDate
group by j.symbol, j.LongShort,j.SecurityType
order by j.Symbol

select '#dividend', * from #dividend where symbol = @symbol

RAISERROR('Completed #dividend', 0, 1) with nowait

SELECT @bDate as busdate, J.symbol, j.SecurityType, j.LongShort as side, sum(credit - debit) as balance
into #dividend_withholding
FROM vwFullJournal j
where 
AccountType in ('DIVIDENDS WITHHOLDING EXPENSE')
and j.[when] <= @bDate
group by j.symbol, j.LongShort,j.SecurityType
order by j.Symbol

select '#dividend_withholding', * from #dividend_withholding where symbol = @symbol

RAISERROR('Completed #dividend_withholding', 0, 1) with nowait

select upnl.busdate, upnl.symbol, upnl.SecurityType, upnl.side, 
coalesce(upnl.unrealized_pnl,0) as unrealized, 
coalesce(upnlfx.unrealized_pnl_fx, 0) as unrealized_fx, 
coalesce(rpnl.realized_pnl, 0) as realized, 
coalesce(rpnlfx.realized_pnl_fx,0) as realized_fx, coalesce(rpnl.realized_pnl,0) + coalesce(rpnlfx.realized_pnl_fx,0) + coalesce(upnl.unrealized_pnl,0) + coalesce(upnlfx.unrealized_pnl_fx,0) as net,
coalesce(div.balance, 0) as dividend,
coalesce(divw.balance, 0) as dividend_withholding,
coalesce(div.balance, 0) + coalesce(divw.balance, 0) as dividend_net
into #details
from #unrealized_pnl upnl
left outer join #unrealized_pnl_fx upnlfx on upnlfx.symbol = upnl.symbol and upnlfx.side = upnl.side
left outer join #realized_pnl rpnl on rpnl.symbol = upnl.symbol and rpnl.side = upnl.side
left outer join #realized_pnl_fx rpnlfx on rpnlfx.symbol = upnl.symbol and rpnlfx.side = upnl.side
left outer join #dividend div on div.symbol = upnl.symbol and div.side = upnl.side
left outer join #dividend_withholding divw on divw.symbol = upnl.symbol and divw.side = upnl.side
order by upnl.Symbol asc

select '#details', * from #details where symbol = @Symbol

RAISERROR('Updating cost_basis', 0, 1) with nowait
-- begin tran
delete from cost_basis where business_date = @bDate
-- delete from cost_basis where business_date = @bDate and Side = 'SHORT'

insert into cost_basis ( business_date, symbol, balance, quantity, cost_basis, side, realized_pnl, unrealized_pnl, eod_price, realized_pnl_fx, unrealized_pnl_fx, dividend, dividend_withholding, dividend_net )
select cb.busdate, cb.symbol, 
case 
	when cb.side = 'LONG' then Abs(cb.Balance)
	else cb.Balance
end,
cb.Quantity, 
case
	When ROUND(cb.Quantity,2) != 0 then ABS((cb.Balance + coalesce(ul.realized,0)) / cb.Quantity) / coalesce(sd.Multiplier,1)
	else 0
end,
cb.Side, 
coalesce(ul.realized,0), 
case
	When ROUND(cb.Quantity,2) != 0 then coalesce(ul.unrealized,0)
	else 0
end, 
cb.eod_price,
ul.realized_fx,
ul.unrealized_fx,
ul.dividend,
ul.dividend_withholding,
ul.dividend_net
from #costbasis_all cb 
inner join #details ul on ul.busdate = cb.busdate and ul.symbol = cb.symbol and ul.Side = cb.Side
left outer join #security_details sd on sd.SecurityCode = cb.symbol
-- where cb.Side = 'LONG'

-- commit tran

RAISERROR('Completed', 0, 1) with nowait

RETURN
GO
PRINT N'Altering [dbo].[SeedDatabase]...';


GO
/*
Used to populate the database on initial startup of the system.  And also ensure we are clean
*/
ALTER PROCEDURE [dbo].[SeedDatabase]
AS

delete from cost_basis
delete from journal_log
delete from unofficial_daily_pnl_history
delete from unofficial_daily_pnl
delete from tax_lot_status
delete from tax_lot
delete from market_prices_history
delete from market_prices
delete from fx_rates_history
delete from fx_rates

delete from account
delete from account_type
delete from account_category

/*
Categories
*/
INSERT [dbo].[account_category] ([id], [name]) VALUES (1, N'Asset')
INSERT [dbo].[account_category] ([id], [name]) VALUES (2, N'Liability')
INSERT [dbo].[account_category] ([id], [name]) VALUES (3, N'Equity')
INSERT [dbo].[account_category] ([id], [name]) VALUES (4, N'Revenues')
INSERT [dbo].[account_category] ([id], [name]) VALUES (5, N'Expenses')
INSERT [dbo].[account_category] ([id], [name]) VALUES (0, N'Dummy')

/*
Derivative Contracts

We use these for OTC Instruments
*/
SET IDENTITY_INSERT [dbo].[account_type] ON 
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (1, 1, N'CASH')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (2, 1, N'LONG POSITIONS AT COST')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (3, 1, N'Mark to Market Longs')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (4, 1, N'PURCHASED/SOLD) Fixed Income COUPON INTEREST')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (5, 1, N'DUE FROM/(TO) PRIME BROKERS ( Unsettled Activity )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (6, 1, N'Settled Cash')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (7, 1, N'UNREALIZED GAIN/LOSS SWAPS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (8, 1, N'SWAP COLLATERAL ACCOUNTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (9, 1, N'UNREALIZED GAIN/LOSS FUTURES')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (10, 1, N'FUTURES COLLATERAL ACCOUNTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (11, 1, N'DIVIDENDS RECEIVABLE')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (12, 1, N'INTEREST RECEIVABLE ( Coupon Payments )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (13, 1, N'Interest Receivable on  PB Balances ')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (14, 1, N'INTERCOMPANY RECEIVABLE/(PAYABLE)')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (15, 1, N'CAPITAL RECEIVABLE/ PAYABLE FROM SHAREHOLDERS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (16, 1, N'FIXED ASSETS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (17, 1, N'ACCCUMULATED DEPRECIATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (18, 1, N'LEASEHOLD IMPROVEMENTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (19, 1, N'ACCUMULATED AMORTIZATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (20, 1, N'ORGANIZATION COSTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (21, 1, N'PREPAID EXPENSES')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (22, 2, N'SHORT POSITIONS AT COST')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (23, 2, N'Mark to Market Shorts')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (24, 2, N'DIVIDENDS PAYABLE')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (25, 2, N'INTEREST PAYABLE ( Fixed Income Coupons )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (26, 2, N'Interest Expense ( Bond Premium ammortization )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (27, 2, N'Interest Expense of PB Balances  Payable')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (28, 2, N'Financing Expense on Swap Par Value')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (29, 2, N'DIVIDENDS FOREIGN WITHHOLDINGS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (30, 2, N'ACCRUED EXPENSES')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (31, 3, N'CONTRIBUTED CAPITAL')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (32, 3, N'RETAINED EARNINGS-PRIOR YEARS P&L')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (33, 3, N'CURRENT YEAR NET INCOME/(LOSS)')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (34, 4, N'REALIZED GAIN/(LOSS)')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (35, 4, N'CHANGE IN UNREALIZED GAIN/(LOSS)')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (36, 4, N'DIVIDEND INCOME')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (37, 4, N'FOREIGN WITHHOLDING TAX')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (38, 4, N'INTEREST INCOME ( Fixed Income Coupon )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (39, 4, N'Interest Income on  PB Balances')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (40, 5, N'DIVIDEND EXPENSE')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (41, 5, N'INTEREST EXPENSE ( Fixed Income Coupons )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (42, 5, N'Interest Expense of PB Balances')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (43, 5, N'STOCK BORROW FEES')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (44, 5, N'EMPLOYEE COMPENSATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (45, 5, N'Expenses Paid')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (46, 5, N'AMORTIZATION AND DEPRECIATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (47, 0, N'Dummy Type')

SET IDENTITY_INSERT [dbo].[account_type] OFF

--dummy account
INSERT INTO [dbo].[account]([name],[description],[account_type_id]) VALUES('Dummy Account','Default Account',(select top 1 id from account_type where account_category_id = 0))

-- server side filters
delete from server_side_filter_config
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'fund','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'symbol','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'AccountCategory','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'AccountType','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'AccountName','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'fx_currency','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'CustodianCode','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'SecurityType','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Side','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Action','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Event','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Status','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'source','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Source','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'event','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'TradeId','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'LongShort','vwFullJournal','vwFullJournal','Journals Ledgers')

-- default layouts
delete from [data_grid_layouts]

SET IDENTITY_INSERT [dbo].[data_grid_layouts] ON 
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (2, 7, N'Trade', N'trades', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":232,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"myName","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"LPOrderId","hide":false,"aggFunc":null,"width":270,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccrualId","hide":false,"aggFunc":null,"width":110,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Symbol","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Quantity","hide":false,"aggFunc":null,"width":122,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TimeInForce","hide":false,"aggFunc":null,"width":125,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderType","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"BloombergCode","hide":false,"aggFunc":null,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"EzeTicker","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityCode","hide":false,"aggFunc":null,"width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ExecutionBroker","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fund","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PMCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PortfolioCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Trader","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettlePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionCategory","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentOrderId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentSymbol","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Commission","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fees","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderSource","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"UpdatedOn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"LocalNetNotional","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"TradeDate","sort":"asc"}]', N'{}', N'{}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (3, 1, N'Journals Ledgers', N'Testing Events', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":402,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":true,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"debit","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"desc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"BJRI","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (4, 1, N'Journals Ledgers', N'Default', 1, N'false', N'[{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":true,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":true,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"debit","hide":false,"aggFunc":"sum","width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (5, 1, N'Journals Ledgers', N'TOP Level NAV', 1, N'false', N'[{"colId":"Side","hide":true,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":true,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":true,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":true,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":330,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":144,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (6, 1, N'Journals Ledgers', N'Bobby-Default', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (7, 1, N'Journals Ledgers', N'Bobby-NAV', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":488,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"bb fp","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"2019-04-01","endDate":"2019-12-31"}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (8, 1, N'Journals Ledgers', N'Bobby-Balance Sheet', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"AccountCategory","sort":"desc"}]', N'{"AccountCategory":{"values":["Asset","Liability","Equity"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (9, 1, N'Journals Ledgers', N'Bobby-Income Statement', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"ag-Grid-AutoColumn","sort":"asc"}]', N'{"AccountCategory":{"values":["Expenses","Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (10, 1, N'Journals Ledgers', N'Bobby-Currency Balances', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"AccountType","sort":"asc"}]', N'{"AccountCategory":{"values":["Asset","Liability","Revenues"],"filterType":"set"},"AccountType":{"values":["Settled Cash","DUE FROM/(TO) PRIME BROKERS ( Unsettled Activity )","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (11, 1, N'Journals Ledgers', N'Bobby-Swaps', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":465,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"AccountType","hide":false,"aggFunc":null,"width":387,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"accountName","hide":false,"aggFunc":null,"width":425,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":261,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"accountName","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (12, 1, N'Journals Ledgers', N'Bobby PnL Decomposition', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":506,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":96,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"balance","sort":"asc"}]', N'{"AccountCategory":{"values":["Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (13, 1, N'Journals Ledgers', N'Bobby Currency PnL Decomposition', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":506,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":96,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"balance","sort":"asc"}]', N'{"AccountCategory":{"values":["Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (14, 1, N'Journals Ledgers', N'Nav', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":151,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":386,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":111,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (15, 1, N'Journals Ledgers', N'Balance Sheet', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":151,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":386,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":111,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Equity","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (16, 1, N'Journals Ledgers', N'Income Statement', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":151,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":386,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":111,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Expenses","Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (17, 1, N'Journals Ledgers', N'Trial Balance', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":86,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":126,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":129,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":136,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":119,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (18, 1, N'Journals Ledgers', N'Bobby-Symbol Activity', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":458,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":96,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccountType","hide":false,"aggFunc":null,"width":330,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":465,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":3}]', N'[]', N'[{"colId":"when","sort":"desc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (19, 1, N'Journals Ledgers', N'Realized Gain/Loss', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Revenues"],"filterType":"set"},"AccountType":{"values":["REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","fx gain or loss on settled balance","fx gain or loss on unsettled balance","Settled Cash"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (20, 1, N'Journals Ledgers', N'Bobby-Activity by Type', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":297,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":177,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":5},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":144,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"security_id","hide":false,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":118,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":2}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (21, 1, N'Journals Ledgers', N'Bobby-Mkt Value', 1, N'false', N'[{"colId":"TradeDate","hide":true,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":408,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"AccountCategory","sort":"asc"}]', N'{"AccountType":{"values":["FX MARK TO MARKET ON STOCK COST (SHORTS)","FX MARKET TO MARKET ON STOCK COST","Mark to Market Derivatives Contracts at Fair Value (Assets)","Mark to Market Derivatives Contracts at Fair Value (Liabilities)","Mark to Market Longs","Mark to Market Shorts","Mark to Market longs fx translation gain or loss","Mark to Market shorts fx translation gain or loss","LONG POSITIONS AT COST","ACCRUED EXPENSES","CHANGE IN UNREALIZED GAIN/(LOSS)","CONTRIBUTED CAPITAL","Change in Unrealized Derivatives Contracts at Fair Value","Change in Unrealized Derivatives Contracts due to FX Translation","Change in unrealized due to fx on original Cost","Expenses Paid","Net Income 2019","PREPAID EXPENSES","REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","SHORT POSITIONS AT COST","change in unrealized do to fx translation","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"},"AccountCategory":{"values":["Asset","Liability","Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"ILPT","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (22, 1, N'Journals Ledgers', N'Bobby-Citco Pos&Mkt Value', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":450,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountType":{"values":["ACCRUED EXPENSES","CHANGE IN UNREALIZED GAIN/(LOSS)","CONTRIBUTED CAPITAL","Change in Unrealized Derivatives Contracts at Fair Value","Change in Unrealized Derivatives Contracts due to FX Translation","Change in unrealized due to fx on original Cost","Expenses Paid","FX MARK TO MARKET ON STOCK COST (SHORTS)","FX MARKET TO MARKET ON STOCK COST","LONG POSITIONS AT COST","Mark to Market Derivatives Contracts at Fair Value (Assets)","Mark to Market Derivatives Contracts at Fair Value (Liabilities)","Mark to Market Longs","Mark to Market Shorts","Mark to Market longs fx translation gain or loss","Mark to Market shorts fx translation gain or loss","Net Income 2019","PREPAID EXPENSES","REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","SHORT POSITIONS AT COST","change in unrealized do to fx translation","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"byg ln","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (23, 1, N'Journals Ledgers', N'Citco Long Rec', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":450,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"SecurityType","sort":"desc"}]', N'{"Side":{"values":["SHORT","SELL","BUY"],"filterType":"set"},"AccountType":{"values":["ACCRUED EXPENSES","CHANGE IN UNREALIZED GAIN/(LOSS)","CONTRIBUTED CAPITAL","Change in Unrealized Derivatives Contracts at Fair Value","Change in Unrealized Derivatives Contracts due to FX Translation","Change in unrealized due to fx on original Cost","Expenses Paid","FX MARK TO MARKET ON STOCK COST (SHORTS)","FX MARKET TO MARKET ON STOCK COST","LONG POSITIONS AT COST","Mark to Market Derivatives Contracts at Fair Value (Assets)","Mark to Market Derivatives Contracts at Fair Value (Liabilities)","Mark to Market Longs","Mark to Market Shorts","Mark to Market longs fx translation gain or loss","Mark to Market shorts fx translation gain or loss","Net Income 2019","PREPAID EXPENSES","REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","SHORT POSITIONS AT COST","change in unrealized do to fx translation","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"},"AccountCategory":{"values":["Asset"],"filterType":"set"},"SecurityType":{"values":["Common Stock","REIT","Unit","Open-End Fund","Cash","Equity Option"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":false,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (24, 1, N'Journals Ledgers', N'Citco - Derivs', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":463,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":5},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability","Equity","Expenses"],"filterType":"set"},"SecurityType":{"values":["CROSS","Equity Swap","FORWARD"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (26, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"event","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{"TradeId":{"filterType":"text","type":"contains","filter":"da474"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (27, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"event","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (28, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"event","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{"TradeId":{"filterType":"text","type":"contains","filter":"fe65c"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (29, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"Side","hide":false,"aggFunc":null,"width":65,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":97,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":105,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (30, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"Side","hide":false,"aggFunc":null,"width":65,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":97,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":105,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (32, 19, N'Taxlot Status', N'Brian''s View', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":204,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"open_id","hide":true,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"trade_date","hide":false,"aggFunc":null,"width":118,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"original_quantity","hide":false,"aggFunc":"sum","width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":136,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"investment_at_cost","hide":false,"aggFunc":null,"width":161,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"status":{"values":["Open","Partially Closed"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","dateFilter":{"startDate":"2020-01-01","endDate":"2020-01-01"}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (34, 7, N'Trade', N'Jon New', 1, N'false', N'[{"colId":"TradeTime","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"LPOrderId","hide":false,"aggFunc":null,"width":270,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccrualId","hide":false,"aggFunc":null,"width":110,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Symbol","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Quantity","hide":false,"aggFunc":null,"width":122,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TimeInForce","hide":false,"aggFunc":null,"width":125,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderType","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"BloombergCode","hide":false,"aggFunc":null,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"EzeTicker","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityCode","hide":false,"aggFunc":null,"width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ExecutionBroker","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fund","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PMCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PortfolioCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Trader","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettlePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionCategory","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentOrderId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentSymbol","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Commission","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fees","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderSource","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"UpdatedOn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"LocalNetNotional","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"TradeDate","sort":"asc"}]', N'{}', N'{"symbolFilter":"gil"}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (36, 1, N'Journals Ledgers', N'Bobby-CFD Equity Swaps', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":540,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"AccountType","hide":false,"aggFunc":null,"width":387,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":125,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":122,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"SecurityType":{"values":["Equity Swap"],"filterType":"set"},"AccountCategory":{"values":["Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"2019-04-01","endDate":"2019-12-31"}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (37, 1, N'Journals Ledgers', N'CFD-Rec', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":491,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"AccountType","hide":false,"aggFunc":null,"width":415,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"accountName","hide":false,"aggFunc":null,"width":491,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":6},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":5},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"bga au","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"2019-04-01","endDate":"2019-12-31"}}', 0, 0)
SET IDENTITY_INSERT [dbo].[data_grid_layouts] OFF

SET IDENTITY_INSERT [dbo].[tax_rate] ON 
INSERT [dbo].[tax_rate] ([Id], [effective_from], [effective_to], [long_term_tax_rate], [short_term_tax_rate], [short_term_period], [created_date], [last_updated_date], [created_by], [last_updated_by], [active_flag]) VALUES (1, CAST(N'2019-01-01T00:00:00.000' AS DateTime), CAST(N'2019-12-31T00:00:00.000' AS DateTime), CAST(0.200000000 AS Decimal(16, 9)), CAST(0.396000000 AS Decimal(16, 9)), 365, CAST(N'2019-12-23T08:27:49.013' AS DateTime), CAST(N'2019-12-26T09:48:04.360' AS DateTime), N'John Smith', N'John Smith', 1)
INSERT [dbo].[tax_rate] ([Id], [effective_from], [effective_to], [long_term_tax_rate], [short_term_tax_rate], [short_term_period], [created_date], [last_updated_date], [created_by], [last_updated_by], [active_flag]) VALUES (2, CAST(N'2020-01-01T00:00:00.000' AS DateTime), CAST(N'2020-12-31T00:00:00.000' AS DateTime), CAST(0.200000000 AS Decimal(16, 9)), CAST(0.396000000 AS Decimal(16, 9)), 365, CAST(N'2019-12-23T08:27:49.013' AS DateTime), CAST(N'2019-12-26T09:48:04.360' AS DateTime), N'John Smith', N'John Smith', 1)
SET IDENTITY_INSERT [dbo].[tax_rate] OFF


-- DONE

RETURN 0
GO
PRINT N'Altering [dbo].[CacheBatchResults_rd]...';


GO
/*
exec [CacheBatchResults_rd] 100000
*/


ALTER PROCEDURE [dbo].[CacheBatchResults_rd]
  @BatchSize int
AS

DECLARE @From INT
DECLARE @To INT
DECLARE @TotalCount INT
DECLARE @TotalNumberOfRecords INT
DECLARE @Step INT
DECLARE @Percentage numeric(22,9)
DECLARE @Message varchar(500)
DECLARE @TotalProcessed INT

SET NOCOUNT ON

set @Step = 0

RAISERROR ('Preparing', 0, 1) WITH NOWAIT

set @Message = 'Batch Size ' + Convert(varchar(10), @BatchSize);

RAISERROR (@message, 0, 1) WITH NOWAIT

	SELECT @TotalNumberOfRecords = count(*) FROM vwJournal
	SELECT @TotalCount = MAX(id), @From = MIN(id)  FROM vwJournal
	SET @To = @From + @BatchSize
	SET @TotalProcessed = 0

	RAISERROR ('Dropping table', 0, 1) WITH NOWAIT
	drop table if exists current_journal_full

	RAISERROR ('Creating table', 0, 1) WITH NOWAIT
	CREATE TABLE [dbo].[current_journal_full](
	[when] [datetime] NULL,
	[event] [varchar](100) NULL,
	[credit] [numeric](22, 9) NULL,
	[debit] [numeric](22, 9) NULL,
	[local_credit] [numeric](22, 9) NULL,
	[local_debit] [numeric](22, 9) NULL,
	[symbol] [varchar](100) NULL,
	[security_id] [int] NULL,
	[quantity] [numeric](22, 9) NULL,
	[id] [int] NULL,
	[account_id] [int] NULL,
	[fx_currency] [varchar](3) NULL,
	[fund] [varchar](50) NULL,
	[AccountCategory] [varchar](50) NULL,
	[AccountType] [varchar](100) NULL,
	[accountName] [varchar](100) NULL,
	[accountDescription] [varchar](100) NULL,
	[value] [numeric](22, 9) NULL,
	[source] [varchar](50) NULL,
	[start_price] [numeric](22, 9) NULL,
	[end_price] [numeric](22, 9) NULL,
	[fxrate] [numeric](22, 9) NULL,
	[is_account_to] [bit] NOT NULL,
	[local_value] [numeric](22, 9) NULL,
	[TradeDate] [datetime] NULL,
	[SettleDate] [datetime] NULL,
	[TradeId] [varchar](127) NULL,
	[Action] [varchar](31) NULL,
	[Status] [varchar](20) NULL,
	[CustodianCode] [varchar](63) NULL,
	[SecurityType] [varchar](63) NULL,
	[Side] [varchar](63) NULL,
	[TradeCurrency] [varchar](20) NULL,
	SettleCurrency [varchar](20) NULL
) ON [PRIMARY]


ALTER TABLE [dbo].[current_journal_full] ADD  DEFAULT ((1)) FOR [is_account_to]

	RAISERROR ('Populating current_journal_full', 0, 1) WITH NOWAIT
	WHILE @From < @TotalCount
	
		BEGIN
			insert into current_journal_full
			select vw.*, 
			t.TradeDate,
			t.SettleDate,
			t.TradeId, 
			t.Action, 
			t.Status, 
			t.CustodianCode, 
			t.SecurityType,
			t.Side,
			t.TradeCurrency,
			t.SettleCurrency
			from vwJournal vw
			left outer join current_trade_state t on t.LpOrderId = vw.source
			where vw.id >= @From and vw.id < @To

			SET @TotalProcessed = @TotalProcessed + @BatchSize
			SET @Percentage = (Convert(numeric(22,9), @TotalProcessed) / Convert(numeric(22,9), @TotalNumberOfRecords)) * 100

			set @Message = '[' + Convert(varchar(100), @Step) + '] [' + Convert(varchar(100), ROUND(@Percentage, 2))+ '] inserting ranges: ' + Convert(varchar(100), @From) + ' to ' + Convert(varchar(100), @To)

			RAISERROR (@message, 0,1) with nowait
			SET @From = @To
			SET @To = @To + @BatchSize
			Set @Step = @Step + 1
		END


RAISERROR ('Creating Clustered Indexes', 0, 1) WITH NOWAIT
create clustered index Ix_current_journal_full_when
ON current_journal_full([when] desc)

RAISERROR ('Creating Non Clustered Indexes', 0, 1) WITH NOWAIT
create nonclustered index Ix_current_journal_full_covering_index
ON current_journal_full ([when],accountcategory, accounttype, fund, accountname) INCLUDE (source,[event], credit,debit,symbol,security_id, quantity, id, account_id, fx_currency,accountdescription,[value], start_price, end_price,fxrate,is_account_to,tradedate,settledate,tradeid,[action],[status],custodiancode,securitytype,side);

RAISERROR ('Completed', 0, 1) WITH NOWAIT

	select count(*), 'journal entries' from vwJournal
	union
	select count(*), 'trade population' from current_trade_state

RETURN 0
GO
PRINT N'Altering [dbo].[DayPnlReconcile]...';


GO
/*
Examples 

select * from fnPositions('2020-02-19')
exec [DayPnlReconcile] '2020-02-19'
*/
ALTER PROCEDURE [dbo].[DayPnlReconcile]
	@businessDate Date
AS
declare @busdate as date
set @busdate = @businessDate

RAISERROR('Generating Bookmon PNL', 0, 1) with nowait

select p.BusDate, s.SecurityCode as SecurityCode, Fund, st.SecurityTypeCode as SecurityType, p.Currency,  Sum(DayPnL) as DayPnl 
into #bookmon_pnl
from PositionMaster..intradayPositionSplit p with(nowait)
inner join SecurityMaster..Security s on s.EzeTicker = p.SecurityCode
inner join SecurityMaster..SecurityType st on st.SecurityTypeId = s.SecurityTypeId
inner join ( select BusDate, Max(LastModifiedOn) as lmo  from PositionMaster..intradayPositionSplit with(nowait) group by BusDate) as lmo on lmo.BusDate = p.BusDate and lmo.lmo = p.LastModifiedOn
where p.BusDate = @busDate and p.SecurityCode not like '@CASH%' and p.SecurityCode not like 'ZZ_%'
group by p.BusDate, s.SecurityCode, Fund, p.Currency, st.SecurityTypeCode
order by p.BusDate, SecurityCode, Fund, p.Currency

RAISERROR('Generating Base Records', 0, 1) with nowait

select distinct business_date as BusDate, s.SecurityCode as SecurityCode, Fund, st.SecurityTypeCode as SecurityType, pos.currency, 0 as realizedPnl, 0 as unrealizedPnl, 0 as DayPnl
into #temp
from fnPositions(@busDate) pos
inner join SecurityMaster..Security s on s.SecurityId = pos.security_id
inner join SecurityMaster..SecurityType st on st.SecurityTypeId = s.SecurityTypeId

update #temp
set realizedPnl = GG
from #temp t
inner join (
select [When], s.SecurityCode as Symbol, Fund, SUM(credit-debit) as GG 
from current_journal_full v
inner join SecurityMaster..Security s on s.SecurityId = v.security_id
where AccountType in ('REALIZED GAIN/(LOSS)') and [event] in ('realizedpnl')
group by [When], s.SecurityCode, Fund
) as v on v.[when] = t.BusDate and v.fund = t.fund and v.symbol = t.SecurityCode

update #temp
set unrealizedPnl = GG
from #temp t
inner join (
select [When], s.SecurityCode as Symbol, Fund, SUM(credit-debit) as GG from current_journal_full v
inner join SecurityMaster..Security s on s.SecurityId = v.security_id
where (AccountType = 'CHANGE IN UNREALIZED GAIN/(LOSS)')
or (AccountType = 'change in unrealized due to fx on original Cost' and [event] = 'daily-unrealizedpnl-fx')
or (AccountType = 'change in unrealized do to fx translation' and [event] = 'unrealized-fx-translation')
and v.SecurityType not in ( 'Equity Swap', 'FORWARD', 'CROSS' )
group by [When], s.SecurityCode, Fund
) as v on v.[when] = t.BusDate and v.fund = t.fund and v.symbol = t.SecurityCode

update #temp
set unrealizedPnl = GG
from #temp t
inner join (
select [When], s.SecurityCode as Symbol, Fund, SUM(credit-debit) as GG from current_journal_full v
inner join SecurityMaster..Security s on s.SecurityId = v.security_id
where (AccountType = 'Change in Unrealized Derivatives Contracts at Fair Value')
and v.SecurityType in ( 'Equity Swap', 'FORWARD', 'CROSS' )
group by [When], s.SecurityCode, Fund
) as v on v.[when] = t.BusDate and v.fund = t.fund and v.symbol = t.SecurityCode

update #temp
set DayPnl = Round(unrealizedPnl + realizedPnl,2)
from #temp

-- Recon
select 
coalesce(p.BusDate, b.BusDate) as BusDate, 
coalesce(p.SecurityCode, b.SecurityCode) as Symbol, 
coalesce(p.Fund, b.Fund) as Fund, 
coalesce(p.SecurityType, b.SecurityType) as SecurityType, 
coalesce(p.Currency, b.Currency) as Currency,
case
	when ABS(ROUND(coalesce(b.DayPnl,0) - coalesce(p.DayPnl,0),2)) <= 1.0 then 0.0
	else ROUND(coalesce(b.DayPnl,0) - coalesce(p.DayPnl,0),2) 
end as Diff_DayPnl, 
'BookMon -->' as BookMon, 
b.*, 
'PA -->' as PortfolioA, 
p.* 
from #temp p
full outer join #bookmon_pnl b on b.Busdate = p.BusDate and b.SecurityCode = p.SecurityCode and b.Fund = p.fund 
-- and b.Currency = p.Currency
order by Symbol, p.fund

select * from #temp
order by SecurityCode, fund

select * from #bookmon_pnl
order by SecurityCode, fund

RETURN 0
GO
PRINT N'Altering [dbo].[PnlToDate]...';


GO
ALTER PROCEDURE [dbo].[PnlToDate]
	@Now Date,
	@From Date
AS

-- Get the Base data we need
select business_date as BusDate, SecurityCode as SecurityCode, SecurityId, Fund, st.SecurityTypeCode as SecurityType, pos.currency, 
Sum(pos.quantity) as quantity,
0 as realizedPnl, 0 as unrealizedPnl, 0 as Pnl
into #results
from fnPositions(@Now) pos
inner join SecurityMaster..Security s on s.SecurityId = pos.security_id
inner join SecurityMaster..SecurityType st on st.SecurityTypeId = s.SecurityTypeId
group by business_date, SecurityCode, SecurityId, Fund, st.SecurityTypeCode, pos.currency

-- 'fx gain or loss on unsettled balance'
update #results
set realizedPnl = coalesce(GG,0)
from #results t
inner join (
select security_id, Symbol, Fund, SUM(credit-debit) as GG from current_journal_full
where AccountType in ('REALIZED GAIN/(LOSS)', 'REALIZED GAIN/(LOSS) DUE TO FX')
and [when] >= @From and [when] <= @Now
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId

update #results
set unrealizedPnl = coalesce(GG,0)
from #results t
inner join (
select security_id, Symbol, Fund, SUM(credit-debit) as GG from current_journal_full v
where (AccountType in ('CHANGE IN UNREALIZED GAIN/(LOSS)', 'Change in unrealized due to fx on original Cost', 'change in unrealized do to fx translation'))
and v.SecurityType not in ( 'Equity Swap', 'FORWARD', 'CROSS' )
and v.[when] >= @From and v.[when] <= @Now
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId

update #results
set unrealizedPnl = GG
from #results t
inner join (
select security_id, Symbol, Fund, SUM(credit-debit) as GG from current_journal_full v
where (AccountType in ('Change in Unrealized Derivatives Contracts at Fair Value', 'Change in Unrealized Derivatives Contracts due to FX Translation'))
and v.SecurityType in ( 'Equity Swap', 'FORWARD', 'CROSS' )
and v.[when] >= @From and v.[when] <= @Now
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId

update #results
set Pnl = Round(unrealizedPnl + realizedPnl,2)
from #results

select * from #results
order by SecurityCode asc

RETURN 0
GO
PRINT N'Altering [dbo].[ClosingTaxLot]...';


GO
/*
select * from account_type where name like '%fx translation%'

exec ClosingTaxLot '2019-07-01', '4c4b21ba-ae60-47e1-9c87-4ce206bbeca8'

select credit, debit, credit-debit, * from vwJournal where source = '4c4b21ba-ae60-47e1-9c87-4ce206bbeca8'
and AccountType in ('Mark to Market longs fx translation gain or loss', 'Mark to Market shorts fx translation gain or loss')
and id != 120870553
order by id desc

select sum(credit-debit) from vwJournal where source = '4c4b21ba-ae60-47e1-9c87-4ce206bbeca8'
and AccountType in ('Mark to Market longs fx translation gain or loss', 'Mark to Market shorts fx translation gain or loss')
and id != 120870553

*/
ALTER PROCEDURE [dbo].[ClosingTaxLot]
	@busDate Date,
	@LpOrderId varchar(100)
AS

-- gets the unrealized to unwind
select symbol, source, sum(debit-credit) as unrealized_pnl from vwJournal 
where 
AccountType = 'CHANGE IN UNREALIZED GAIN/(LOSS)' 
and [event] in ('daily-unrealizedpnl', 'reverse-unrealizedpnl')
and [when] < @busDate
and [source] = @LpOrderId
group by symbol, source

-- gets the unrealized fx to unwind
select symbol, source, sum(debit-credit) as unrealized_fx_translation from vwJournal 
where 
AccountType in ('Mark to Market longs fx translation gain or loss', 'Mark to Market shorts fx translation gain or loss')
and [event] = 'unrealized-fx-translation' 
and [when] < @busDate
and [source] = @LpOrderId
group by symbol, source

select symbol, source, sum(debit-credit) as asset_daily_unrealizedpnl_fx from vwJournal 
where 
AccountType in ('FX MARKET TO MARKET ON STOCK COST', 'FX MARK TO MARKET ON STOCK COST (SHORTS)')
and [event] in ('daily-unrealizedpnl-fx', 'reversal-unrealized-cash-fx')
and [when] < @busDate
and [source] = @LpOrderId
group by symbol, source

select symbol, source, sum(debit-credit) as revenue_daily_unrealizedpnl_fx from vwJournal 
where 
AccountType = 'Change in unrealized due to fx on original Cost' 
and [event] in ('daily-unrealizedpnl-fx', 'reversal-unrealized-cash-fx')
and [when] < @busDate
and [source] = @LpOrderId
group by symbol, source

RETURN 0
GO
PRINT N'Altering [dbo].[DayOverDayIncome]...';


GO
/*
declare @busDate Date
declare @startDate Date
declare @prevDate Date

set @startDate = '2020-01-01'
set @busDate = '2020-01-04'
set @prevDate = '2020-01-03'

exec [DayOverDayIncome] @startDate, @busDate, @prevDate
*/
ALTER PROCEDURE [dbo].[DayOverDayIncome]
	@startDate Date,
	@businessDate Date,
	@prevbusinessDate Date
AS

select Fund, sum(debit) as Debit, sum(credit) as Credit, sum(debit-credit) as Balance from vwJournal
where AccountCategory in ( 'Revenues', 'Expenses' )
and [when] > @prevbusinessDate and [when] <= @businessDate
group by Fund

RETURN 0
GO
PRINT N'Creating [dbo].[MarketValueAppraisalReport]...';


GO
CREATE PROCEDURE [dbo].[MarketValueAppraisalReport]
	@date datetime
AS
	select s.EzeTicker, s.Sedol, s.Cusip, s.ISIN, s.EzeSecurityType, tl.id, tl.quantity,
    case when tl.side = 'BUY' then 'LONG'
    when tl.side = 'SHORT' then 'SHORT'
    end as position,
    c.cost_basis,
    tl.business_date
    from fnTaxLotReport(@date) tl
    inner join [SecurityMaster]..security s on tl.symbol = s.ezeticker
    left join cost_basis c on c.symbol = tl.symbol and c.business_date = tl.business_date
    where tl.side in ('BUY', 'SHORT') and tl.status in ('open', 'partially closed')
RETURN 0
GO
PRINT N'Creating [dbo].[PostProcessETL]...';


GO
/*
Run after the Start up process, all changes are made to the current_trade_view, this will vary by client
*/
CREATE PROCEDURE [dbo].[PostProcessETL]
AS

update current_journal_full set TradeCurrency = fx_currency, SettleCurrency = fx_currency where event = 'settled-cash-fx'

update current_journal_full set security_id = s.SecurityId from current_journal_full
inner join SecurityMaster..Security s on s.SecurityCode = symbol
where security_id = -1

RETURN 0
GO
PRINT N'Creating [dbo].[PrepareRun]...';


GO
/*
exec PrepareRun '2019-04-01', '2019-04-01', 'Day'

declare @start Date
declare @end Date
select @start = min([when]), @end = max([when]) from journal with(nowait)
print @start
print @end

exec PrepareRun @start, @end, 'ITD'
*/
CREATE PROCEDURE [dbo].[PrepareRun]
	@startDate Date,
	@endDate Date,
	@period Varchar(20)
AS
DECLARE @Deleted_Rows INT;
DECLARE @Message Varchar(100);
DECLARE @Total INT;
DECLARE @Progress INT;
DECLARE @Batch int;
DECLARE @Percentage numeric(22,9)

set @Batch = 100000;

SELECT @Total = count(*) from journal with(nowait)
where 
[when] between @startDate and @endDate
    and event not in ('manual')

SET @Progress = 0;

RAISERROR ('Clearing down journals', 0, 1) WITH NOWAIT

SET @Deleted_Rows = 1;
WHILE (@Deleted_Rows > 0 and @Total > 0)
BEGIN

    delete top (@Batch) from journal 
    where [when] between @startDate and @endDate
    and event not in ('manual')

    SET @Deleted_Rows = @@ROWCOUNT;
    SET @Progress = @Progress + @Batch

	Set @percentage = @Progress / @Total
	
    set @Message = 'Removed ' + Convert(varchar(25), @Percentage) + ' of ' + Convert(varchar(25), @Total);

    RAISERROR (@Message, 0, 1) WITH NOWAIT

END

if @period = 'ITD'
begin
	RAISERROR ('Clearing down journal_log', 0, 1) WITH NOWAIT
	delete from journal_log
	RAISERROR ('Clearing down tax_lot', 0, 1) WITH NOWAIT
	delete from tax_lot
	RAISERROR ('Clearing down tax_lot_status', 0, 1) WITH NOWAIT
	delete from tax_lot_status
	RAISERROR ('Clearing down cost_basis', 0, 1) WITH NOWAIT
	delete from cost_basis
	RAISERROR ('Clearing down pnl_summary', 0, 1) WITH NOWAIT
	delete from pnl_summary
end

RETURN 0
GO
PRINT N'Creating [dbo].[PreProcessETL]...';


GO
/*
Run after the Start up process, all changes are made to the current_trade_view, this will vary by client
*/
CREATE PROCEDURE [dbo].[PreProcessETL]
AS

	update current_trade_state set SecurityType = 'Open-End Fund' where Symbol = 'MSUXX'
	update current_trade_state set Symbol = 'TWE AU SWAP', SecurityId = 32669 where Symbol = 'TWE AU EQUITY SWAP'

	DECLARE @Symbol Varchar(20)
	Declare @SecurityId int

	select top 1 @symbol = Symbol, @SecurityId = SecurityID from current_trade_state where Symbol = 'DUE GY'
	update current_trade_state set Symbol = @Symbol, SecurityId = @SecurityId where Symbol = 'DUE GR'

	update current_trade_state set SecurityType = 'Common Stock' where SecurityType = 'REIT'
RETURN 0
GO
PRINT N'Creating [dbo].[PullDividends]...';


GO
/*
This depends on the schema in TradeMaster..trade, so for the moment we only enable this once the schema is in place
*/
CREATE PROCEDURE [dbo].[PullDividends]
AS

/*
insert into cash_dividends (created_by, created_date, last_updated_date, last_updated_by, symbol, notice_date, execution_date, record_date, pay_date, rate, currency, withholding_rate, fx_rate, active_flag)
select 'system', GetDate(), GetDate(), 'system', t.ParentSymbol, t.TradeDate, t.TradeDate, t.SettleDate, t.SettleDate, t.LocalDividendPerShare, 'USD', t.WithholdingRate, 1, 1
from TradeMaster..trade t
left outer join cash_dividends cd on cd.execution_date = t.TradeDate and cd.symbol = t.ParentSymbol
inner join (
select Symbol, ParentSymbol, TradeDate, Max(TradeTime) as time from TradeMaster..trade 
where SecurityType = 'journals'
and Symbol = 'ZZ_CASH_DIVIDENDS' and ParentSymbol is not null
group by Symbol, ParentSymbol, TradeDate
) as s on s.time = t.TradeTime and s.ParentSymbol = t.ParentSymbol and s.TradeDate = t.TradeDate
where SecurityType = 'journals'
and t.Symbol = 'ZZ_CASH_DIVIDENDS' and t.ParentSymbol is not null
and cd.currency is null
*/

insert into cash_dividends (created_by, created_date, last_updated_date, last_updated_by, symbol, notice_date, execution_date, record_date, pay_date, rate, currency, withholding_rate, fx_rate, active_flag)
select 'system', GetDate(), GetDate(), 'system', t.ParentSymbol, t.TradeDate, t.TradeDate, t.SettleDate, t.SettleDate, 0, 'USD', 0, 1, 1
from TradeMaster..trade t
left outer join cash_dividends cd on cd.execution_date = t.TradeDate and cd.symbol = t.ParentSymbol
inner join (
select Symbol, ParentSymbol, TradeDate, Max(TradeTime) as time from TradeMaster..trade 
where SecurityType = 'journals'
and Symbol = 'ZZ_CASH_DIVIDENDS' and ParentSymbol is not null
group by Symbol, ParentSymbol, TradeDate
) as s on s.time = t.TradeTime and s.ParentSymbol = t.ParentSymbol and s.TradeDate = t.TradeDate
where SecurityType = 'journals'
and t.Symbol = 'ZZ_CASH_DIVIDENDS' and t.ParentSymbol is not null
and cd.currency is null

RETURN 0
GO
PRINT N'Refreshing [dbo].[fnTaxLotReport]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[fnTaxLotReport]';


GO
PRINT N'Refreshing [dbo].[DetailPnlToDate]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[DetailPnlToDate]';


GO
PRINT N'Refreshing [dbo].[SyncManualJournal]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[SyncManualJournal]';


GO
PRINT N'Refreshing [dbo].[TaxLotReport]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[TaxLotReport]';


GO
PRINT N'Refreshing [dbo].[UpdateManualJournal]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[UpdateManualJournal]';


GO
PRINT N'Refreshing [dbo].[PeriodJournals]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[PeriodJournals]';


GO
PRINT N'Refreshing [dbo].[PeriodPnl]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[PeriodPnl]';


GO
PRINT N'Refreshing [dbo].[FundAdminReconcile]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[FundAdminReconcile]';


GO
PRINT N'Refreshing [dbo].[RunStats]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[RunStats]';


GO
PRINT N'Refreshing [dbo].[EndOfYear]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[EndOfYear]';


GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [dbo].[stock_splits_audit_trail] WITH CHECK CHECK CONSTRAINT [FK_stock_splits_audit_trail_To_stock_splits];


GO
PRINT N'Update complete.';


GO
