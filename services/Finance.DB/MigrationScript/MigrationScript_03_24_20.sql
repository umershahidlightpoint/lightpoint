/*
Deployment script for FundAccounting

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.


truncate table journal
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "FundAccounting"
:setvar DefaultFilePrefix "FundAccounting"
:setvar DefaultDataPath "E:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Data\"
:setvar DefaultLogPath "F:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Data\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET TEMPORAL_HISTORY_RETENTION ON 
            WITH ROLLBACK IMMEDIATE;
    END


GO
/*
The column local_value on table [dbo].[journal] must be changed from NULL to NOT NULL. If the table contains data, the ALTER script may not work. To avoid this issue, you must add values to this column for all rows or mark it as allowing NULL values, or enable the generation of smart-defaults as a deployment option.
*/

IF EXISTS (select top 1 1 from [dbo].[journal])
    RAISERROR (N'Rows were detected. The schema update is terminating because data loss might occur.', 16, 127) WITH NOWAIT

GO
PRINT N'Dropping unnamed constraint on [dbo].[current_journal_full]...';


GO
ALTER TABLE [dbo].[current_journal_full] DROP CONSTRAINT [DF__current_j__is_ac__46486B8E];


GO
PRINT N'Dropping unnamed constraint on [dbo].[journal]...';


GO
ALTER TABLE [dbo].[journal] DROP CONSTRAINT [DF__journal__local_v__075714DC];


GO
PRINT N'Dropping unnamed constraint on [dbo].[security_details]...';


GO
ALTER TABLE [dbo].[security_details] DROP CONSTRAINT [DF__security___activ__10E07F16];


GO
PRINT N'Altering [dbo].[cash_dividends]...';


GO
ALTER TABLE [dbo].[cash_dividends]
    ADD [maturity_date] DATETIME NULL;


GO
PRINT N'Altering [dbo].[cash_dividends_audit_trail]...';


GO
ALTER TABLE [dbo].[cash_dividends_audit_trail]
    ADD [maturity_date] DATETIME NULL;


GO
PRINT N'Starting rebuilding table [dbo].[current_journal_full]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_current_journal_full] (
    [when]               DATETIME        NULL,
    [event]              VARCHAR (100)   NULL,
    [credit]             NUMERIC (22, 9) NULL,
    [debit]              NUMERIC (22, 9) NULL,
    [local_credit]       NUMERIC (22, 9) NULL,
    [local_debit]        NUMERIC (22, 9) NULL,
    [symbol]             VARCHAR (100)   NULL,
    [security_id]        INT             NULL,
    [quantity]           NUMERIC (22, 9) NULL,
    [id]                 INT             NULL,
    [account_id]         INT             NULL,
    [fx_currency]        VARCHAR (3)     NULL,
    [fund]               VARCHAR (50)    NULL,
    [AccountCategory]    VARCHAR (50)    NULL,
    [AccountType]        VARCHAR (100)   NULL,
    [AccountTypeId]      INT             NULL,
    [accountName]        VARCHAR (100)   NULL,
    [accountDescription] VARCHAR (100)   NULL,
    [value]              NUMERIC (22, 9) NULL,
    [source]             VARCHAR (50)    NULL,
    [start_price]        NUMERIC (22, 9) NULL,
    [end_price]          NUMERIC (22, 9) NULL,
    [fxrate]             NUMERIC (22, 9) NULL,
    [is_account_to]      BIT             DEFAULT ((1)) NOT NULL,
    [local_value]        NUMERIC (22, 9) NULL,
    [TradeDate]          DATETIME        NULL,
    [SettleDate]         DATETIME        NULL,
    [TradeId]            VARCHAR (127)   NULL,
    [Action]             VARCHAR (31)    NULL,
    [Status]             VARCHAR (20)    NULL,
    [CustodianCode]      VARCHAR (63)    NULL,
    [SecurityType]       VARCHAR (63)    NULL,
    [Side]               VARCHAR (63)    NULL,
    [TradeCurrency]      VARCHAR (20)    NULL,
    [SettleCurrency]     VARCHAR (20)    NULL
) ON [PRIMARY];

CREATE CLUSTERED INDEX [tmp_ms_xx_index_Ix_current_journal_full_when1]
    ON [dbo].[tmp_ms_xx_current_journal_full]([when] DESC);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[current_journal_full])
    BEGIN
        INSERT INTO [dbo].[tmp_ms_xx_current_journal_full] ([when], [event], [credit], [debit], [local_credit], [local_debit], [symbol], [security_id], [quantity], [id], [account_id], [fx_currency], [fund], [AccountCategory], [AccountType], [accountName], [accountDescription], [value], [source], [start_price], [end_price], [fxrate], [is_account_to], [local_value], [TradeDate], [SettleDate], [TradeId], [Action], [Status], [CustodianCode], [SecurityType], [Side], [TradeCurrency], [SettleCurrency])
        SELECT   [when],
                 [event],
                 [credit],
                 [debit],
                 [local_credit],
                 [local_debit],
                 [symbol],
                 [security_id],
                 [quantity],
                 [id],
                 [account_id],
                 [fx_currency],
                 [fund],
                 [AccountCategory],
                 [AccountType],
                 [accountName],
                 [accountDescription],
                 [value],
                 [source],
                 [start_price],
                 [end_price],
                 [fxrate],
                 [is_account_to],
                 [local_value],
                 [TradeDate],
                 [SettleDate],
                 [TradeId],
                 [Action],
                 [Status],
                 [CustodianCode],
                 [SecurityType],
                 [Side],
                 [TradeCurrency],
                 [SettleCurrency]
        FROM     [dbo].[current_journal_full]
        ORDER BY [when] DESC;
    END

DROP TABLE [dbo].[current_journal_full];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_current_journal_full]', N'current_journal_full';

EXECUTE sp_rename N'[dbo].[current_journal_full].[tmp_ms_xx_index_Ix_current_journal_full_when1]', N'Ix_current_journal_full_when', N'INDEX';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [dbo].[current_journal_full].[Ix_current_journal_full_covering_index]...';


GO
CREATE NONCLUSTERED INDEX [Ix_current_journal_full_covering_index]
    ON [dbo].[current_journal_full]([when] ASC, [AccountCategory] ASC, [AccountType] ASC, [fund] ASC, [accountName] ASC)
    INCLUDE([source], [event], [credit], [debit], [symbol], [security_id], [quantity], [id], [account_id], [fx_currency], [accountDescription], [value], [start_price], [end_price], [fxrate], [is_account_to], [TradeDate], [SettleDate], [TradeId], [Action], [Status], [CustodianCode], [SecurityType], [Side]);


GO
PRINT N'Altering [dbo].[journal]...';


GO
ALTER TABLE [dbo].[journal] ALTER COLUMN [local_value] DECIMAL (22, 9) NOT NULL;


GO
PRINT N'Starting rebuilding table [dbo].[pnl_summary]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_pnl_summary] (
    [BusDate]      DATE            NULL,
    [Fund]         VARCHAR (100)   NULL,
    [SecurityCode] VARCHAR (100)   NULL,
    [SecurityId]   INT             NULL,
    [SecurityType] VARCHAR (100)   NULL,
    [Quantity]     NUMERIC (22, 9) NULL,
    [currency]     VARCHAR (10)    NULL,
    [DayPnl]       NUMERIC (22, 9) NULL,
    [WtdPnl]       NUMERIC (22, 9) DEFAULT 0 NULL,
    [MtdPnl]       NUMERIC (22, 9) NULL,
    [QtdPnl]       NUMERIC (22, 9) NULL,
    [YtdPnl]       NUMERIC (22, 9) NULL,
    [ItdPnl]       NUMERIC (22, 9) NULL,
    [NAV]          NUMERIC (22, 9) DEFAULT 0 NULL
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[pnl_summary])
    BEGIN
        INSERT INTO [dbo].[tmp_ms_xx_pnl_summary] ([BusDate], [SecurityCode], [SecurityId], [SecurityType], [Quantity], [currency], [DayPnl], [MtdPnl], [QtdPnl], [YtdPnl], [ItdPnl])
        SELECT [BusDate],
               [SecurityCode],
               [SecurityId],
               [SecurityType],
               [Quantity],
               [currency],
               [DayPnl],
               [MtdPnl],
               [QtdPnl],
               [YtdPnl],
               [ItdPnl]
        FROM   [dbo].[pnl_summary];
    END

DROP TABLE [dbo].[pnl_summary];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_pnl_summary]', N'pnl_summary';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Starting rebuilding table [dbo].[security_details]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_security_details] (
    [id]                           INT             IDENTITY (1, 1) NOT NULL,
    [security_id]                  INT             NOT NULL,
    [symbol]                       VARCHAR (100)   NOT NULL,
    [security_type]                VARCHAR (100)   NULL,
    [created_by]                   VARCHAR (100)   NOT NULL,
    [created_date]                 DATETIME        NOT NULL,
    [last_updated_by]              VARCHAR (100)   NULL,
    [last_updated_date]            DATETIME        NULL,
    [maturity_date]                DATETIME        NULL,
    [valuation_date]               DATETIME        NULL,
    [spread]                       NUMERIC (22, 8) NULL,
    [security_return_description]  VARCHAR (MAX)   NULL,
    [financing_leg]                VARCHAR (MAX)   NULL,
    [financing_end_date]           DATETIME        NULL,
    [financing_payment_date]       DATETIME        NULL,
    [financing_reset_date_type]    VARCHAR (100)   NULL,
    [financing_reset_date]         VARCHAR (200)   NULL,
    [next_financing_end_date_type] VARCHAR (100)   NULL,
    [next_financing_end_date]      VARCHAR (200)   NULL,
    [fixed_rate]                   NUMERIC (22, 8) NULL,
    [dcc_fixed_rate]               VARCHAR (100)   NULL,
    [floating_rate]                VARCHAR (100)   NULL,
    [dcc_floating_rate]            VARCHAR (100)   NULL,
    [primary_market]               VARCHAR (200)   NULL,
    [reference_equity]             NUMERIC (22, 8) NULL,
    [reference_obligation]         NUMERIC (22, 8) NULL,
    [upfront]                      NUMERIC (22, 8) NULL,
    [premium_rate]                 NUMERIC (22, 8) NULL,
    [premium_frequency]            NUMERIC (22, 8) NULL,
    [active_flag]                  BIT             DEFAULT 1 NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[security_details])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_security_details] ON;
        INSERT INTO [dbo].[tmp_ms_xx_security_details] ([id], [security_id], [symbol], [created_by], [created_date], [last_updated_by], [last_updated_date], [maturity_date], [valuation_date], [spread], [security_return_description], [financing_leg], [financing_end_date], [financing_payment_date], [financing_reset_date_type], [financing_reset_date], [next_financing_end_date_type], [next_financing_end_date], [fixed_rate], [dcc_fixed_rate], [floating_rate], [dcc_floating_rate], [primary_market], [reference_equity], [reference_obligation], [upfront], [premium_rate], [premium_frequency], [active_flag])
        SELECT   [id],
                 [security_id],
                 [symbol],
                 [created_by],
                 [created_date],
                 [last_updated_by],
                 [last_updated_date],
                 [maturity_date],
                 [valuation_date],
                 [spread],
                 [security_return_description],
                 [financing_leg],
                 [financing_end_date],
                 [financing_payment_date],
                 [financing_reset_date_type],
                 [financing_reset_date],
                 [next_financing_end_date_type],
                 [next_financing_end_date],
                 [fixed_rate],
                 [dcc_fixed_rate],
                 [floating_rate],
                 [dcc_floating_rate],
                 [primary_market],
                 [reference_equity],
                 [reference_obligation],
                 [upfront],
                 [premium_rate],
                 [premium_frequency],
                 [active_flag]
        FROM     [dbo].[security_details]
        ORDER BY [id] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_security_details] OFF;
    END

DROP TABLE [dbo].[security_details];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_security_details]', N'security_details';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [dbo].[symbol_change]...';


GO
CREATE TABLE [dbo].[symbol_change] (
    [id]                INT           IDENTITY (1, 1) NOT NULL,
    [created_by]        VARCHAR (100) NOT NULL,
    [created_date]      DATETIME      NOT NULL,
    [last_updated_by]   VARCHAR (100) NULL,
    [last_updated_date] DATETIME      NULL,
    [old_symbol]        VARCHAR (100) NOT NULL,
    [new_symbol]        VARCHAR (100) NOT NULL,
    [notice_date]       DATETIME      NOT NULL,
    [execution_date]    DATETIME      NOT NULL,
    [active_flag]       BIT           NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating [dbo].[symbol_change_audit]...';


GO
CREATE TABLE [dbo].[symbol_change_audit] (
    [id]                INT           IDENTITY (1, 1) NOT NULL,
    [symbol_change_id]  INT           NOT NULL,
    [created_by]        VARCHAR (100) NOT NULL,
    [created_date]      DATETIME      NOT NULL,
    [last_updated_by]   VARCHAR (100) NULL,
    [last_updated_date] DATETIME      NULL,
    [old_symbol]        VARCHAR (100) NOT NULL,
    [new_symbol]        VARCHAR (100) NOT NULL,
    [notice_date]       DATETIME      NOT NULL,
    [execution_date]    DATETIME      NOT NULL,
    [active_flag]       BIT           NOT NULL,
    PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating [dbo].[trade_reason]...';


GO
CREATE TABLE [dbo].[trade_reason] (
    [LPOrderId]   VARCHAR (127) NOT NULL,
    [Reason]      VARCHAR (MAX) NULL,
    [CreatedBy]   VARCHAR (100) NULL,
    [CreatedDate] DATETIME      NULL
);


GO
PRINT N'Creating unnamed constraint on [dbo].[journal]...';


GO
ALTER TABLE [dbo].[journal]
    ADD DEFAULT 0 FOR [local_value];


GO
PRINT N'Creating unnamed constraint on [dbo].[symbol_change]...';


GO
ALTER TABLE [dbo].[symbol_change]
    ADD DEFAULT 1 FOR [active_flag];


GO
PRINT N'Creating [dbo].[FK_symbol_change_audit_Tosymbol_change]...';


GO
ALTER TABLE [dbo].[symbol_change_audit] WITH NOCHECK
    ADD CONSTRAINT [FK_symbol_change_audit_Tosymbol_change] FOREIGN KEY ([symbol_change_id]) REFERENCES [dbo].[symbol_change] ([id]);


GO
PRINT N'Altering [dbo].[cash_dividend_insert_trigger]...';


GO
ALTER TRIGGER [cash_dividend_insert_trigger]
	ON [dbo].[cash_dividends]
	AFTER INSERT
	AS
	BEGIN
		INSERT INTO [cash_dividends_audit_trail]
           ([cash_dividend_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[symbol]
           ,[notice_date]
           ,[execution_date]
           ,[record_date]
           ,[pay_date]
           ,[rate]
           ,[currency]
           ,[withholding_rate]
           ,[fx_rate]
           ,[active_flag]
		   ,[maturity_date])
		select * from inserted
	END
GO
PRINT N'Altering [dbo].[cash_dividend_update_trigger]...';


GO
ALTER TRIGGER [cash_dividend_update_trigger]
	ON [dbo].[cash_dividends]
	AFTER UPDATE
	AS
	BEGIN
	INSERT INTO [cash_dividends_audit_trail]
           ([cash_dividend_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[symbol]
           ,[notice_date]
           ,[execution_date]
           ,[record_date]
           ,[pay_date]
           ,[rate]
           ,[currency]
           ,[withholding_rate]
           ,[fx_rate]
           ,[active_flag]
		   ,[maturity_date])
		select * from deleted
	END
GO
PRINT N'Creating [dbo].[symbol_change_update_trigger]...';


GO
CREATE TRIGGER [symbol_change_update_trigger]
	ON [dbo].[symbol_change]
	AFTER UPDATE
	AS
	BEGIN
		INSERT INTO [dbo].[symbol_change_audit]
           ([symbol_change_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[old_symbol]
           ,[new_symbol]
           ,[notice_date]
           ,[execution_date]
           ,[active_flag])
select * from deleted
	END
GO
PRINT N'Creating [dbo].[symbol_change_insert_trigger]...';


GO
CREATE TRIGGER [symbol_change_insert_trigger]
	ON [dbo].[symbol_change]
	AFTER INSERT
	AS
	BEGIN
INSERT INTO [dbo].[symbol_change_audit]
           ([symbol_change_id]
           ,[created_by]
           ,[created_date]
           ,[last_updated_by]
           ,[last_updated_date]
           ,[old_symbol]
           ,[new_symbol]
           ,[notice_date]
           ,[execution_date]
           ,[active_flag])
select * from inserted
	END
GO
PRINT N'Refreshing [dbo].[vwDividendDetails]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vwDividendDetails]';


GO
PRINT N'Altering [dbo].[vwFullJournal]...';


GO
/*
select distinct LongShort from vwFullJournal

Requires that the CacheResults sp is run first to populate the two tables, current_XXXXX
*/
ALTER VIEW [dbo].[vwFullJournal]
	AS 

select *, 
case
	when AccountType in ('Settled Cash') then 'LONG'
	when SecurityType in ('FORWARD') and Quantity > 0 then 'LONG'
	when SecurityType in ('FORWARD') and Quantity < 0 then 'SHORT'
	when Side in ('BUY', 'SELL') then 'LONG'
	when Side in ('SHORT', 'COVER') then 'SHORT'
	else 'NonTrading'
end as LongShort
from current_journal_full
GO
PRINT N'Altering [dbo].[vwJournal]...';


GO
/*
select top 100 * from vwJournal
*/
ALTER VIEW [dbo].[vwJournal]
	AS 
                            SELECT 
                                    [when],
                                    [event],
                                    (CASE 
										WHEN [account_category].[name] in ('Asset', 'Expenses') and value < 0  THEN ABS(value) 
                                        WHEN [account_category].[name] not in ('Asset', 'Expenses') and value > 0  THEN ABS(value) 
										Else 0
										END  ) credit,
                                    (CASE 
										WHEN [account_category].[name] in ('Asset','Expenses') and value > 0  THEN ABS(value) 
                                        WHEN [account_category].[name] not in ('Asset','Expenses') and value < 0  THEN ABS(value) 
										Else 0
										END  ) debit,

                                    (CASE 
										WHEN [account_category].[name] in ('Asset', 'Expenses') and local_value < 0  THEN ABS(local_value) 
                                        WHEN [account_category].[name] not in ('Asset', 'Expenses') and local_value > 0  THEN ABS(local_value) 
										Else 0
										END  ) local_credit,
                                    (CASE 
										WHEN [account_category].[name] in ('Asset','Expenses') and local_value > 0  THEN ABS(local_value) 
                                        WHEN [account_category].[name] not in ('Asset','Expenses') and local_value < 0  THEN ABS(local_value) 
										Else 0
										END  ) local_debit,
									[journal].[symbol],
									[journal].[security_id],
									[journal].[quantity],
                                    [journal].[id],
                                    [account_id],
                                    [fx_currency],
                                    [fund],
                                    [account_category].[name] as AccountCategory,  
                                    [account_type].[name] as AccountType,
                                    [account_type].id as AccountTypeId,
									[account].[name] as accountName, -- Changed to CamelCase
									[account].[description] as accountDescription, -- Changed to CamelCase
                                    [value],
                                    [source],
                                    [start_price],
                                    [end_price],
									[fxrate],
									[is_account_to],
									[local_value]
                                    FROM [journal] with(nolock) 
                        join account with(nolock)  on [journal]. [account_id] = account.id 
                        join [account_type] with(nolock) on  [account].account_type_id = [account_type].id
                        join [account_category] with(nolock) on  [account_type].account_category_id = [account_category].id
GO
PRINT N'Refreshing [dbo].[vwWorkingJournals]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vwWorkingJournals]';


GO
PRINT N'Creating [dbo].[vwManualJournal]...';


GO
CREATE   VIEW [dbo].[vwManualJournal]
	AS 
select *
from journal with(nolock) 
where event = 'manual'
GO
PRINT N'Altering [dbo].[fnTaxLotReport]...';


GO
/*
Examples:

select * from tax_lot_status

SET STATISTICS TIME ON
SET STATISTICS IO ON

select * from fnTaxLotReport('2019-12-31') 
order by symbol
*/
ALTER   FUNCTION [dbo].[fnTaxLotReport]
(
	@bDate Date
)
RETURNS @returntable TABLE
(
	id int,
	open_id varchar(127),
	symbol varchar(100),
	side varchar(100),
	status varchar(100),
	original_quantity numeric(22,9),
	quantity numeric(22,9),
	business_date DATE,
	generated_on DATE,
	trade_date DATE,
	investment_at_cost numeric(22,9),
	fx_rate numeric(22,9),
	fund varchar(100),
	trade_price numeric(22,9),
	eod_px numeric(22,9),
	realized numeric(22,9),
	unrealized numeric(22,9),
	net numeric(22,9),
	original_investment_at_cost numeric(22,9),
	residual_investment_at_cost numeric(22,9),
	report_date DATE
)
AS
BEGIN

WITH taxlot (business_date, open_lot_id, realized_pnl, quantity)
AS
(
select @bDate as business_date, open_lot_id, sum(realized_pnl) as realized_pnl, sum(quantity) as quantity
from tax_lot 
where trade_date <= @bDate
group by open_lot_id
),
security_details (security_id, security_code, bloomberg_code, Multiplier)
AS
(
select s.SecurityId, SecurityCode, BbergCode, coalesce(sd.Multiplier, sf.ContractSize) as Multiplier 
from SecurityMaster..Security s
left join SecurityMaster..SecDerivatives sd on sd.SecurityId = s.SecurityId
left join SecurityMaster..SecFutures sf on sf.SecurityId = s.SecurityId
where coalesce(sd.Multiplier, sf.ContractSize) is not null
),
latest_prices (security_code, price)
AS
(
select SecurityCode, Price from PositionMAster..intradayPositionSplit s
inner join ( select @bdate as bdate, max(LastModifiedOn) lmo from PositionMAster..intradayPositionSplit where busDate = @bDate) f on f.lmo = s.LastModifiedOn and f.bDate = s.BusDate
),
unrealized_pnl (source, balance)
AS
(
		select source, round(sum(debit-credit),2) as balance from current_journal_full
		where (AccountType in ('CHANGE IN UNREALIZED GAIN/(LOSS)', 'Change in unrealized due to fx on original Cost', 'change in unrealized do to fx translation'))
		or (AccountType in ('Change in Unrealized Derivatives Contracts at Fair Value', 'Change in Unrealized Derivatives Contracts due to FX Translation'))
		group by source
)

	INSERT @returntable
		select tls.id, tls.open_id, tls.symbol, tls.side, 
		case
			when tls.original_quantity + coalesce(tl.quantity,0) = 0 then 'Closed'
			when coalesce(tl.quantity,0) = 0 then 'Open'
			else 'Partially Closed'
		end as status,
		tls.original_quantity, 
		tls.original_quantity + coalesce(tl.quantity,0), 
		tls.business_date, tls.generated_on, tls.trade_date, tls.investment_at_cost, tls.fx_rate, tls.fund,tls.trade_price,
		-- PRICE
		case
			when cts.TradeCurrency = 'GBX' or cts.TradeCurrency = 'GBP' then coalesce(lp.price, 0) / 100.0
			else coalesce(lp.price, 0) * coalesce(sd.Multiplier,1)
		end,
		-- PRICE
		coalesce(tl.realized_pnl,0) as realized, 
		case
			when tls.quantity != 0 then coalesce(up.balance, 0) 
			else 0.0
		end as unrealized,
		case
			when tls.quantity != 0 then coalesce(tl.realized_pnl,0) + coalesce(up.balance, 0)
			else coalesce(tl.realized_pnl,0)
		end as net,
		(tls.original_quantity * tls.trade_price) * -1,
		(tls.quantity * tls.trade_price) * -1,
		@bDate as report_date
		from tax_lot_status tls
		-- inner join taxlotstatus taxls on taxls.open_id = tls.open_id		
		inner join current_trade_state cts on cts.LPOrderId = tls.open_id
		left outer join security_details sd on sd.security_id = cts.SecurityId
		left outer join taxlot tl on tl.open_lot_id = tls.open_id
		left outer join latest_prices lp on lp.security_code = tls.symbol
		left outer join unrealized_pnl up on up.source = tls.open_id
		where tls.trade_date <= @bDate
	RETURN
END
GO
PRINT N'Altering [dbo].[fnPositions]...';


GO
/*
Examples:

select * from fnPositions('2019-12-31')

select * from tax_lot_status
select * from market_prices
select * from tax_lot
*/

ALTER   FUNCTION [dbo].[fnPositions]
(
	@bDate Date
)
RETURNS @returntable TABLE
(
	business_date DATE,
	symbol varchar(100),
	side varchar(100),
	security_id int,
	fund varchar(100),
	security_type varchar(100),
	custodianCode varchar(100),
	trade_currency varchar(5),
	currency varchar(5),
	quantity numeric(22,9),
	investment_at_cost numeric(22,9),
	exposure numeric(22,9),
	price numeric(22,9),
	fx numeric(22,9),
	commission numeric(22,9),
	fees numeric(22,9)
)
AS
BEGIN

WITH taxlotstatus (business_date, open_id, symbol, side, security_id, fund, trade_currency, currency, quantity, investment_at_cost, price, comissions, fees, security_type, CustodianCode)
AS
(
select @bDate as business_date, open_id, tax_lot_status.symbol, tax_lot_status.side, t.SecurityId, tax_lot_status.Fund, t.TradeCurrency, t.SettleCurrency,
SUM(original_quantity) as quantity, 
Sum(investment_at_cost * -1) as investment_at_cost,
Max(trade_price) as price,
SUM(t.Commission) as commission,
SUM(t.fees) as fees,
t.SecurityType,
t.CustodianCode
from tax_lot_status 
inner join current_trade_state t on t.LpOrderId = tax_lot_status.open_id
where tax_lot_status.trade_date <= @bDate
group by open_id, tax_lot_status.symbol, tax_lot_status.side, t.SecurityId, tax_lot_status.Fund, t.TradeCurrency, t.SettleCurrency, t.SecurityType, t.CustodianCode
)
,
taxlot (business_date, open_lot_id, quantity, investment_at_cost)
AS
(
select @bDate as business_date, open_lot_id, sum(quantity) as quantity, sum(Abs(investment_at_cost)) as investment_at_cost
from tax_lot 
where trade_date <= @bDate
group by open_lot_id
),
security_details (security_id, security_code, bloomberg_code, Multiplier)
AS
(
select s.SecurityId, SecurityCode, BbergCode, coalesce(sd.Multiplier, sf.ContractSize) as Multiplier 
from SecurityMaster..Security s
left join SecurityMaster..SecDerivatives sd on sd.SecurityId = s.SecurityId
left join SecurityMaster..SecFutures sf on sf.SecurityId = s.SecurityId
where coalesce(sd.Multiplier, sf.ContractSize) is not null
)


	INSERT @returntable
		select tls.business_date, tls.symbol, side, tls.security_id, fund, security_type, CustodianCode, trade_currency, currency, 
		case 
			When Side = 'BUY' then SUM(coalesce(tls.quantity,0) + coalesce(tl.quantity,0))       
			else SUM(coalesce(tls.quantity,0) + coalesce(tl.quantity,0))
		end as quantity,
		case
			When SUM(coalesce(tls.quantity,0) + coalesce(tl.quantity,0)) = 0 then 0
			else SUM(coalesce(tls.investment_at_cost,0) + coalesce(tl.Investment_at_cost,0))
		end as investment_at_cost,
		case
			when security_type = 'FORWARD' then 0.0
			else 
				case	
					when trade_currency = 'GBX' or trade_currency = 'GBP' then SUM(coalesce(tls.quantity,0) + coalesce(tl.quantity,0)) * (Max(coalesce(mp.price, 0)) / 100.0) * Max(coalesce(fx.price, 1)) * Max(coalesce(sd.Multiplier,1))
					else SUM(coalesce(tls.quantity,0) + coalesce(tl.quantity,0)) * Max(coalesce(mp.price, 0)) * Max(coalesce(fx.price, 1)) * Max(coalesce(sd.Multiplier,1))
				end
		end,
		case
			when trade_currency = 'GBX' or trade_currency = 'GBP' then Max(coalesce(mp.price, 0)) / 100.0
			else Max(coalesce(mp.price, 0))
		end,
		Max(coalesce(fx.price, 1)),
		SUM(tls.comissions),
		SUM(tls.fees)
		from taxlotstatus tls
		left outer join taxlot tl on tl.open_lot_id = tls.open_id
		left outer join market_prices mp on mp.security_id = tls.security_id and mp.business_date = @bDate
		left outer join market_prices fx on fx.symbol = '@CASH'+tls.currency and fx.business_date = @bDate
		left outer join security_details sd on sd.security_id = tls.security_id
		group by tls.business_date, tls.symbol, side, tls.security_id, fund, trade_currency, currency, security_type, CustodianCode
		order by tls.symbol
	RETURN
END
GO
PRINT N'Altering [dbo].[CacheBatchResults_rd]...';


GO
/*
exec [CacheBatchResults_rd] 100000
*/

ALTER PROCEDURE [dbo].[CacheBatchResults_rd]
  @BatchSize int
AS

DECLARE @From INT
DECLARE @rowCount INT
DECLARE @To INT
DECLARE @TotalCount INT
DECLARE @TotalNumberOfRecords INT
DECLARE @Step INT
DECLARE @Percentage numeric(22,9)
DECLARE @Message varchar(500)
DECLARE @TotalProcessed INT

SET NOCOUNT ON

set @Step = 0

RAISERROR ('Preparing', 0, 1) WITH NOWAIT

set @Message = 'Batch Size ' + Convert(varchar(10), @BatchSize);

RAISERROR (@message, 0, 1) WITH NOWAIT

	SELECT @TotalNumberOfRecords = count(*) FROM vwJournal where event != 'manual'
	SELECT @TotalCount = MAX(id), @From = MIN(id)  FROM vwJournal where event != 'manual'
	SET @To = @From + @BatchSize
	SET @TotalProcessed = 0

	RAISERROR ('Dropping table', 0, 1) WITH NOWAIT
	drop table if exists current_journal_full

	RAISERROR ('Creating table', 0, 1) WITH NOWAIT
	CREATE TABLE [dbo].[current_journal_full](
	[when] [datetime] NULL,
	[event] [varchar](100) NULL,
	[credit] [numeric](22, 9) NULL,
	[debit] [numeric](22, 9) NULL,
	[local_credit] [numeric](22, 9) NULL,
	[local_debit] [numeric](22, 9) NULL,
	[symbol] [varchar](100) NULL,
	[security_id] [int] NULL,
	[quantity] [numeric](22, 9) NULL,
	[id] [int] NULL,
	[account_id] [int] NULL,
	[fx_currency] [varchar](3) NULL,
	[fund] [varchar](50) NULL,
	[AccountCategory] [varchar](50) NULL,
	[AccountType] [varchar](100) NULL,
	[AccountTypeId] int NULL,
	[accountName] [varchar](100) NULL,
	[accountDescription] [varchar](100) NULL,
	[value] [numeric](22, 9) NULL,
	[source] [varchar](50) NULL,
	[start_price] [numeric](22, 9) NULL,
	[end_price] [numeric](22, 9) NULL,
	[fxrate] [numeric](22, 9) NULL,
	[is_account_to] [bit] NOT NULL,
	[local_value] [numeric](22, 9) NULL,
	[TradeDate] [datetime] NULL,
	[SettleDate] [datetime] NULL,
	[TradeId] [varchar](127) NULL,
	[Action] [varchar](31) NULL,
	[Status] [varchar](20) NULL,
	[CustodianCode] [varchar](63) NULL,
	[SecurityType] [varchar](63) NULL,
	[Side] [varchar](63) NULL,
	[TradeCurrency] [varchar](20) NULL,
	SettleCurrency [varchar](20) NULL
) ON [PRIMARY]


ALTER TABLE [dbo].[current_journal_full] ADD  DEFAULT ((1)) FOR [is_account_to]

	RAISERROR ('Populating current_journal_full with manual entries', 0, 1) WITH NOWAIT
			insert into current_journal_full
			select vw.*, 
			t.TradeDate,
			t.SettleDate,
			t.TradeId, 
			t.Action, 
			t.Status, 
			t.CustodianCode, 
			t.SecurityType,
			t.Side,
			t.TradeCurrency,
			t.SettleCurrency
			from vwJournal vw
			left outer join current_trade_state t on t.LpOrderId = vw.source
			where event = 'manual'

	RAISERROR ('Populating current_journal_full', 0, 1) WITH NOWAIT
	WHILE @TotalProcessed < @TotalNumberOfRecords
	
		BEGIN
			insert into current_journal_full
			select vw.*, 
			t.TradeDate,
			t.SettleDate,
			t.TradeId, 
			t.Action, 
			t.Status, 
			t.CustodianCode, 
			t.SecurityType,
			t.Side,
			t.TradeCurrency,
			t.SettleCurrency
			from vwJournal vw
			left outer join current_trade_state t on t.LpOrderId = vw.source
			where vw.id >= @From and vw.id < @To

			SET @rowCount = @@ROWCOUNT

			SET @TotalProcessed = @TotalProcessed + @rowCount

			SET @Percentage = (Convert(numeric(22,9), @TotalProcessed) / Convert(numeric(22,9), @TotalNumberOfRecords)) * 100

			set @Message = '[' + Convert(varchar(100), @Step) + '] [' + Convert(varchar(100), @rowCount) + '] [' + Convert(varchar(100), ROUND(@Percentage, 2))+ '] inserting ranges: ' + Convert(varchar(100), @From) + ' to ' + Convert(varchar(100), @To)

			if @rowCount != 0 
			begin
				RAISERROR (@message, 0,1) with nowait
			end
			
			SET @From = @To
			SET @To = @To + @BatchSize
			Set @Step = @Step + 1
		END


RAISERROR ('Creating Clustered Indexes', 0, 1) WITH NOWAIT
create clustered index Ix_current_journal_full_when
ON current_journal_full([when] desc)

RAISERROR ('Creating Non Clustered Indexes', 0, 1) WITH NOWAIT
create nonclustered index Ix_current_journal_full_covering_index
ON current_journal_full ([when],accountcategory, accounttype, fund, accountname) INCLUDE (source,[event], credit,debit,symbol,security_id, quantity, id, account_id, fx_currency,accountdescription,[value], start_price, end_price,fxrate,is_account_to,tradedate,settledate,tradeid,[action],[status],custodiancode,securitytype,side);

RAISERROR ('Creating Non Clustered ColumnStore Index', 0, 1) WITH NOWAIT
CREATE NONCLUSTERED COLUMNSTORE INDEX CSI_current_journal_full
ON dbo.current_journal_full 
(
	AccountType,
	AccountCategory,
	id,
	[when],
	event
)

RAISERROR ('Completed', 0, 1) WITH NOWAIT

	select count(*), 'journal entries' from vwJournal
	union
	select count(*), 'trade population' from current_trade_state

RETURN 0
GO
PRINT N'Altering [dbo].[PnlToDate]...';


GO
/*
exec [PnlToDate] '2019-12-31', '2019-04-01'
*/
ALTER PROCEDURE [dbo].[PnlToDate]
	@Now Date,
	@From Date
AS

select security_id, AccountType, coalesce(SecurityType, 'Journals') as SecurityType, Symbol, Fund, SUM(credit-debit) as GG 
into #tempdata
from current_journal_full
where [when] >= @From and [when] <= @Now
group by AccountType, security_id, coalesce(SecurityType, 'Journals'), Symbol, Fund

-- Get the Base data we need
select business_date as BusDate, SecurityCode as SecurityCode, SecurityId, Fund, st.SecurityTypeCode as SecurityType, pos.currency, 
Sum(pos.quantity) as quantity,
0 as realizedPnl, 0 as unrealizedPnl, 0 as Pnl, 0 as Nav
into #results
from fnPositions(@Now) pos
inner join SecurityMaster..Security s on s.SecurityId = pos.security_id
inner join SecurityMaster..SecurityType st on st.SecurityTypeId = s.SecurityTypeId
group by business_date, SecurityCode, SecurityId, Fund, st.SecurityTypeCode, pos.currency

insert into #results
select @Now as BusDate, Symbol, security_id, Fund, 'Journals', '', 
0 as quantity,
0 as realizedPnl, 0 as unrealizedPnl, 0 as Pnl, 0 as Nav
from #tempdata
where Symbol like 'ZZ_%' or Symbol like '@CASH%'
group by Symbol, security_id, Fund

-- 'fx gain or loss on unsettled balance'
update #results
set realizedPnl = coalesce(GG,0)
from #results t
inner join (
select security_id, Symbol, Fund, SUM(GG) as GG from #tempdata
where AccountType in ('REALIZED GAIN/(LOSS)', 'REALIZED GAIN/(LOSS) DUE TO FX')
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId

update #results
set unrealizedPnl = coalesce(GG,0)
from #results t
inner join (
select security_id, Symbol, Fund, SUM(GG) as GG from #tempdata
where (AccountType in ('CHANGE IN UNREALIZED GAIN/(LOSS)', 'Change in unrealized due to fx on original Cost', 'change in unrealized do to fx translation'))
and SecurityType not in ( 'Equity Swap', 'FORWARD', 'CROSS' )
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId

update #results
set unrealizedPnl = GG
from #results t
inner join (
select security_id, Symbol, Fund, SUM(GG) as GG from #tempdata
where (AccountType in ('Change in Unrealized Derivatives Contracts at Fair Value', 'Change in Unrealized Derivatives Contracts due to FX Translation'))
and SecurityType in ( 'Equity Swap', 'FORWARD', 'CROSS' )
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId

update #results
set Nav = v.nav
from #results t
inner join (
select security_id, Symbol, Fund, sum(debit-credit) as nav 
from current_journal_full
where AccountCategory in ('Asset', 'Liability')
and [when] >= @From and [when] <= @Now
group by security_id, Symbol, Fund
) as v on v.fund = t.fund and v.security_id = t.SecurityId


update #results
set Pnl = Round(unrealizedPnl + realizedPnl,2)
from #results

select * from #results
order by SecurityCode asc

RETURN 0
GO
PRINT N'Altering [dbo].[MarketValueAppraisalReport]...';


GO
/*
select * from fnTaxLotReport('2019-12-31')

select * from ##taxReport

drop table ##taxReport

exec [MarketValueAppraisalReport] '2019-12-02'
*/
ALTER PROCEDURE [dbo].[MarketValueAppraisalReport]
	@date datetime
AS

begin tran
-- GLOBAL TEMP TABLE ##taxReport, this is shared between all session instances, this means that we can cache data for a time period
IF OBJECT_ID('tempdb..##taxReport' , 'U') IS NULL
begin
	select *
	into ##taxReport
	from fnTaxLotReport(@date)
end
else
begin
	if not exists (select top 1 * from ##taxReport where report_date = @date)
	begin
		insert into ##taxReport select * from fnTaxLotReport(@date)
	end
end
commit

select 
    s.EzeTicker, 
    coalesce(s.Sedol, '') as Sedol, 
    coalesce(s.Cusip, '') as Cusip, 
    coalesce(s.ISIN, '') as ISIN, 
    st.SecurityTypeCode as SecurityType, 
    tl.id, 
    tl.quantity,
    case 
        when tl.side = 'BUY' then 'LONG'
        when tl.side = 'SHORT' then 'SHORT'
        end as position,
    c.cost_basis,
    tl.business_date,
	s.SecurityDesc,
	mp.price as end_price,
	mp.price * coalesce(fxrate.price,1) as end_price_reporting,
	cts.SettleCurrency as local_currency,
	CONVERT(VARCHAR(50), CONCAT('@CASH', cts.SettleCurrency)) as cashSymbol,
	coalesce(fxrate.price,1) as fx_rate_to_reporting_currency,
	case
		when coalesce(c.cost_basis,1) != 0 then (coalesce(mp.price,0) - (c.cost_basis)) / coalesce(c.cost_basis,1)
		else 0.0
	end as price_percent_change,
	c.cost_basis * tl.quantity as cost_local,
	tl.quantity * mp.price as end_market_value_local,
	tl.quantity * (mp.price - c.cost_basis) as unrealized_pnl_local,

	c.cost_basis * tl.quantity * coalesce(fxrate.price,1) as cost_basis_reporting,
	tl.quantity * mp.price * coalesce(fxrate.price,1) as end_market_value_reporting,
	(tl.quantity * mp.price * coalesce(fxrate.price,1)) - (c.cost_basis * tl.quantity * coalesce(fxrate.price,1)) as unrealized_pnl_reporting

from ##taxReport tl
inner join [SecurityMaster]..security s on tl.symbol = s.ezeticker
inner join current_trade_state cts on cts.LPOrderId = tl.open_id
left outer join market_prices mp on mp.security_id = s.SecurityId and mp.business_date = @date and mp.event = 'eod'
left outer join market_prices fxrate on fxrate.symbol = CONVERT(VARCHAR(8), CONCAT('@CASH', cts.SettleCurrency)) and fxrate.business_date = @date and fxrate.event = 'eod'
inner join [SecurityMaster]..SecurityType st on st.SecurityTypeId = s.SecurityTypeId
left join cost_basis c on c.symbol = tl.symbol and c.business_date = tl.business_date
where 
    tl.side in ('BUY', 'SHORT') 
    and tl.status in ('open', 'partially closed')
	and tl.report_date = @date
order by tl.Symbol
RETURN 0
GO
PRINT N'Altering [dbo].[PeriodPnl]...';


GO
/*
exec PeriodPnl '2019-04-28', 1

select sum(nav) from pnl_summary where busDate = '2019-12-31'
select * from pnl_summary where busDate = '2019-12-31'
order by SecurityCode

exec PnlToDate '2019-12-31', '2019-01-01'

*/
ALTER   PROCEDURE [dbo].[PeriodPnl]
	@Now Date,
	@Full bit = 0
AS

-- If the enties in the database already exist then skip the population
if ( exists (select top 1 * from pnl_summary where BusDate = @Now) and @Full = 0)
begin
	return 0
end

declare @WTD Date
declare @MTD Date
declare @QTD Date
declare @YTD Date
declare @ITD Date

Set @WTD = DATEADD(dd, -(DATEPART(WEEKDAY, @Now)-1),  DATEADD(dd, DATEDIFF(dd, 0, @Now), 0))
Set @MTD = DATEFROMPARTS(YEAR(@Now),MONTH(@Now),1)
Set @QTD = DATEADD(qq, DATEDIFF(qq, 0, @Now), 0)
Set @YTD = DATEFROMPARTS(YEAR(@Now),1,1)
select @ITD = MIN([when]) from journal with(nolock)

RAISError('Determing Dates', 0, 1) with nowait

print '==> Dates'
print @Now
print @WTD
print @MTD
print @QTD
print @YTD
print @ITD
print '==> Dates'

DECLARE @PnlData TABLE (
	BusDate DATE,
	SecurityCode VARCHAR(50),
	SecurityId int,
	Fund VARCHAR(50),
	SecurityType VARCHAR(50),
	Currency VARCHAR(10),
	Quantity numeric(22,9),
	realizedPnl numeric(22,9), 
	unrealizedPnl numeric(22,9), 
	Pnl numeric(22,9),
	Nav numeric(22,9)
)

INSERT INTO @PnlData(
	BusDate,
	SecurityCode,
	SecurityId,
	Fund,
	SecurityType,
	Currency,
	Quantity, 
	realizedPnl, 
	unrealizedPnl, 
	Pnl,
	Nav
)
Exec PnlToDate @Now, @Now
select * 
into #daypnl
from @PnlData
delete from @PnlData
RAISError('Completed day', 0, 1) with nowait

INSERT INTO @PnlData(
	BusDate,
	SecurityCode,
	SecurityId,
	Fund,
	SecurityType,
	Currency,
	Quantity, 
	realizedPnl, 
	unrealizedPnl, 
	Pnl,
	Nav
)
Exec PnlToDate @Now, @WTD
select * 
into #wtdpnl
from @PnlData
delete from @PnlData
RAISError('Completed week', 0, 1) with nowait

INSERT INTO @PnlData(
	BusDate,
	SecurityCode,
	SecurityId,
	Fund,
	SecurityType,
	Currency,
	Quantity, 
	realizedPnl, 
	unrealizedPnl, 
	Pnl,
	Nav
)
Exec PnlToDate @Now, @MTD
select * 
into #mtdpnl
from @PnlData
delete from @PnlData
RAISError('Completed month', 0, 1) with nowait

INSERT INTO @PnlData(
	BusDate,
	SecurityCode,
	SecurityId,
	Fund,
	SecurityType,
	Currency,
	Quantity, 
	realizedPnl, 
	unrealizedPnl, 
	Pnl,
	Nav
)
Exec PnlToDate @Now, @QTD
select * 
into #qtdpnl
from @PnlData
delete from @PnlData
RAISError('Completed quarter', 0, 1) with nowait

INSERT INTO @PnlData(
	BusDate,
	SecurityCode,
	SecurityId,
	Fund,
	SecurityType,
	Currency,
	Quantity, 
	realizedPnl, 
	unrealizedPnl, 
	Pnl,
	Nav
)
Exec PnlToDate @Now, @YTD
select * 
into #ytdpnl
from @PnlData
delete from @PnlData
RAISError('Completed year', 0, 1) with nowait

INSERT INTO @PnlData(
	BusDate,
	SecurityCode,
	SecurityId,
	Fund,
	SecurityType,
	Currency,
	Quantity, 
	realizedPnl, 
	unrealizedPnl, 
	Pnl,
	Nav
)
Exec PnlToDate @Now, @ITD
select * 
into #itdpnl
from @PnlData
delete from @PnlData
RAISError('Completed inception', 0, 1) with nowait

select distinct v.BusDate, v.Fund, v.SecurityCode, v.SecurityId, v.SecurityType , v.currency
into #distinctSet
from (
select BusDate, Fund, SecurityCode, SecurityId, SecurityType, currency from #daypnl
union 
select BusDate, Fund, SecurityCode, SecurityId, SecurityType , currency from #wtdpnl
union 
select BusDate, Fund, SecurityCode, SecurityId, SecurityType , currency from #mtdpnl
union 
select BusDate, Fund, SecurityCode, SecurityId, SecurityType, currency from #qtdpnl
union 
select BusDate, Fund, SecurityCode, SecurityId, SecurityType , currency from #itdpnl
) v
RAISError('Completed distinct', 0, 1) with nowait

delete from pnl_summary where BusDate = @Now
RAISError('Completed delete', 0, 1) with nowait

insert into pnl_summary (BusDate, Fund, SecurityCode, SecurityId, SecurityType, currency, Quantity, DayPnl, WtdPnl, MtdPnl, QtdPnl, YtdPnl, ItdPnl, Nav)
select distinctSet.BusDate, distinctSet.Fund, distinctSet.SecurityCode, distinctSet.SecurityId, distinctSet.SecurityType, distinctSet.currency, 
itd.Quantity, day.Pnl as DayPnl, wtd.Pnl as WtdPnl, mtd.Pnl as MTDPnl, qtd.Pnl as QTDPnl, ytd.Pnl as YTDPnl, itd.Pnl as ITDPnl, itd.Nav 
from #distinctSet distinctSet
left outer join #daypnl day on day.SecurityCode = distinctSet.SecurityCode and day.BusDate = distinctSet.BusDate and day.SecurityId = distinctSet.SecurityId and day.Fund = distinctSet.Fund and day.SecurityType = distinctSet.SecurityType and day.currency = distinctSet.currency
left outer join #wtdpnl wtd on wtd.SecurityCode = distinctSet.SecurityCode and wtd.BusDate = distinctSet.BusDate and wtd.SecurityId = distinctSet.SecurityId and wtd.Fund = distinctSet.Fund and Wtd.SecurityType = distinctSet.SecurityType and wtd.currency = distinctSet.currency
left outer join #mtdpnl mtd on mtd.SecurityCode = distinctSet.SecurityCode and mtd.BusDate = distinctSet.BusDate and mtd.SecurityId = distinctSet.SecurityId and mtd.Fund = distinctSet.Fund and mtd.SecurityType = distinctSet.SecurityType and mtd.currency = distinctSet.currency
left outer join #qtdpnl qtd on qtd.SecurityCode = distinctSet.SecurityCode and qtd.BusDate = distinctSet.BusDate and qtd.SecurityId = distinctSet.SecurityId and qtd.Fund = distinctSet.Fund and qtd.SecurityType = distinctSet.SecurityType and qtd.currency = distinctSet.currency
left outer join #ytdpnl ytd on ytd.SecurityCode = distinctSet.SecurityCode and ytd.BusDate = distinctSet.BusDate and ytd.SecurityId = distinctSet.SecurityId and ytd.Fund = distinctSet.Fund and ytd.SecurityType = distinctSet.SecurityType and ytd.currency = distinctSet.currency
left outer join #itdpnl itd on itd.SecurityCode = distinctSet.SecurityCode and itd.BusDate = distinctSet.BusDate and itd.SecurityId = distinctSet.SecurityId and itd.Fund = distinctSet.Fund and itd.SecurityType = distinctSet.SecurityType and itd.currency = distinctSet.currency
-- where distinctSet.SecurityCode like '@CASH%'

RAISError('Completed', 0, 1) with nowait

RETURN 0
GO
PRINT N'Altering [dbo].[FundAdminReconcile]...';


GO
/*
Compare FundAdmin Numbers to PA Numbers

truncate table pnl_summary
exec FundAdminReconcile '2019-12-31'
Exec PeriodPnl '2019-12-31'
*/
ALTER PROCEDURE [dbo].[FundAdminReconcile]
	@businessDate Date
AS

/*
Grab Data from PA first, if not populated generate the data first
*/

Exec PeriodPnl @businessDate

RAISError('Security', 0, 1) with nowait

select @businessDate as busDate, s.SecurityCode, pnl.SecurityId, Sum(Amount) as Quantity, Sum(PLBaseRealizedPnl + PLBaseUnRealizedPnl) as DayPnl, Sum(MTDBaseRealizedPnl + MTDBaseUnRealizedPnl) as MTDPnl, Sum(YTDBaseRealizedPnl + YTDBaseUnRealizedPnl) as YTDPnl 
into #fundadmin
from PositionMaster..CITCOPnl pnl
inner join SecurityMaster..Security s on s.SecurityId = pnl.SecurityId
where BusDate = @businessDate and Symbol is not null and pnl.SecurityId != 0
group by s.SecurityCode, pnl.SecurityId

RAISError('Get from pnl_summary', 0, 1) with nowait
-- select * from pnl_summary
select @businessDate as BusDate, Currency, SecurityCode, SecurityType, Sum(Quantity) as Quantity, SUm(DayPnl) as DayPnl, SUm(MtdPnl) as MtdPnl, SUm(QtdPnl) as QtdPnl, SUm(YtdPnl) as YtdPnl, SUm(ItdPnl) as ItdPnl
into #pnl_summary
from pnl_summary
where BusDate =  @businessDate
group by Currency, SecurityCode, SecurityType

RAISError('Reconcile', 0, 1) with nowait
-- Reconcile
select 
coalesce(p.BusDate, b.BusDate) as BusDate, 
coalesce(p.SecurityCode, b.SecurityCode) as Symbol, 
-- coalesce(p.Fund, '') as Fund, 
coalesce(p.SecurityType, '') as SecurityType, 
coalesce(p.Currency, '') as Currency,
coalesce(b.Quantity,0) - coalesce(p.Quantity,0) as Diff_Quantity,
case
	when ABS(ROUND(coalesce(b.DayPnl,0) - coalesce(p.DayPnl,0),2)) <= 1.0 then 0.0
	else ROUND(coalesce(b.DayPnl,0) - coalesce(p.DayPnl,0),2) 
end as Diff_DayPnl, 
case
	when ABS(ROUND(coalesce(b.MTDPnl,0) - coalesce(p.MTDPnl,0),2)) <= 1.0 then 0.0
	else ROUND(coalesce(b.MTDPnl,0) - coalesce(p.MTDPnl,0),2) 
end as Diff_MTDPnl, 
case
	when ABS(ROUND(coalesce(b.YTDPnl,0) - coalesce(p.YTDPnl,0),2)) <= 1.0 then 0.0
	else ROUND(coalesce(b.YTDPnl,0) - coalesce(p.YTDPnl,0),2) 
end as Diff_YTDPnl, 
'FundAdmin -->' as FundAdmin, 
b.*, 
'PA -->' as PortfolioA, 
p.* 
from #pnl_summary p
full outer join #fundadmin b on b.Busdate = p.BusDate and b.SecurityCode = p.SecurityCode
where p.BusDate = @businessDate
-- and b.Currency = p.Currency
order by p.SecurityCode

-- Our Data
select * from #pnl_summary
order by SecurityCode

-- Fund Admin data
select * from #fundadmin
where SecurityCode not like '@CASH%'
order by SecurityCode
	
RETURN 0
GO
PRINT N'Altering [dbo].[SettledCash]...';


GO
/*
exec SettledCash '2020-12-31'
*/
ALTER procedure SettledCash
	@busDate as Datetime
As
select Symbol, fx_currency, source, fund, sum(local_credit - local_debit) as balance, security_id from vwJournal
                    where AccountType = 'Settled Cash' and event in ('settlement', 'dividend')
                    and [when] < @busDate
					and fx_currency not in ('USD')
                    group by Symbol, fx_currency, source, fund, security_id
GO
PRINT N'Altering [dbo].[PreProcessETL]...';


GO
/*
Run after the Start up process, all changes are made to the current_trade_view, this will vary by client

exec PreProcessETL

*/
ALTER PROCEDURE [dbo].[PreProcessETL]
AS
-- Update's to the SecurityTyoe
	update current_trade_state set SecurityType = 'Open-End Fund' where Symbol = 'MSUXX'
	update current_trade_state set SecurityType = 'Common Stock' where SecurityType = 'REIT'

	DECLARE @Symbol Varchar(20)
	Declare @SecurityId int

	-- Corporate Action, rename symbol
	-- Quick and dirty for the moment un work out a better strategy

	select top 1 @symbol = Symbol, @SecurityId = SecurityID from current_trade_state where Symbol = 'TWE AU SWAP'
	update current_trade_state set Symbol = @Symbol, SecurityId = @SecurityId where Symbol = 'TWE AU EQUITY SWAP'
	update market_prices set Symbol = @Symbol where Symbol = 'TWE AU EQUITY SWAP'

	select top 1 @symbol = Symbol, @SecurityId = SecurityID from current_trade_state where Symbol = 'DUE GY'
	update current_trade_state set Symbol = @Symbol, SecurityId = @SecurityId where Symbol = 'DUE GR'
	update market_prices set Symbol = @Symbol where Symbol = 'DUE GR'

	select top 1 @symbol = Symbol, @SecurityId = SecurityID from current_trade_state where Symbol = 'BYD CN'
	update current_trade_state set Symbol = @Symbol, SecurityId = @SecurityId where Symbol = 'BYD-U CN'
	update market_prices set Symbol = @Symbol where Symbol = 'BYD-U CN'

RETURN 0
GO
PRINT N'Altering [dbo].[SeedDatabase]...';


GO
/*
Used to populate the database on initial startup of the system.  And also ensure we are clean
*/
ALTER PROCEDURE [dbo].[SeedDatabase]
AS

delete from cost_basis
delete from journal_log
delete from unofficial_daily_pnl_history
delete from unofficial_daily_pnl
delete from tax_lot_status
delete from tax_lot
delete from market_prices_history
delete from market_prices
delete from fx_rates_history
delete from fx_rates

delete from account
delete from account_type
delete from account_category

/*
Categories
*/
INSERT [dbo].[account_category] ([id], [name]) VALUES (1, N'Asset')
INSERT [dbo].[account_category] ([id], [name]) VALUES (2, N'Liability')
INSERT [dbo].[account_category] ([id], [name]) VALUES (3, N'Equity')
INSERT [dbo].[account_category] ([id], [name]) VALUES (4, N'Revenues')
INSERT [dbo].[account_category] ([id], [name]) VALUES (5, N'Expenses')
INSERT [dbo].[account_category] ([id], [name]) VALUES (0, N'Dummy')

/*
Derivative Contracts

We use these for OTC Instruments
*/
SET IDENTITY_INSERT [dbo].[account_type] ON 
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (1, 1, N'CASH')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (2, 1, N'LONG POSITIONS AT COST')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (3, 1, N'Mark to Market Longs')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (4, 1, N'PURCHASED/SOLD) Fixed Income COUPON INTEREST')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (5, 1, N'DUE FROM/(TO) PRIME BROKERS ( Unsettled Activity )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (6, 1, N'Settled Cash')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (7, 1, N'UNREALIZED GAIN/LOSS SWAPS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (8, 1, N'SWAP COLLATERAL ACCOUNTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (9, 1, N'UNREALIZED GAIN/LOSS FUTURES')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (10, 1, N'FUTURES COLLATERAL ACCOUNTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (11, 1, N'DIVIDENDS RECEIVABLE')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (12, 1, N'INTEREST RECEIVABLE ( Coupon Payments )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (13, 1, N'Interest Receivable on  PB Balances ')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (14, 1, N'INTERCOMPANY RECEIVABLE/(PAYABLE)')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (15, 1, N'CAPITAL RECEIVABLE/ PAYABLE FROM SHAREHOLDERS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (16, 1, N'FIXED ASSETS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (17, 1, N'ACCCUMULATED DEPRECIATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (18, 1, N'LEASEHOLD IMPROVEMENTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (19, 1, N'ACCUMULATED AMORTIZATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (20, 1, N'ORGANIZATION COSTS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (21, 1, N'PREPAID EXPENSES')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (22, 2, N'SHORT POSITIONS AT COST')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (23, 2, N'Mark to Market Shorts')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (24, 2, N'DIVIDENDS PAYABLE')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (25, 2, N'INTEREST PAYABLE ( Fixed Income Coupons )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (26, 2, N'Interest Expense ( Bond Premium ammortization )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (27, 2, N'Interest Expense of PB Balances  Payable')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (28, 2, N'Financing Expense on Swap Par Value')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (29, 2, N'DIVIDENDS FOREIGN WITHHOLDINGS')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (30, 2, N'ACCRUED EXPENSES')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (31, 3, N'CONTRIBUTED CAPITAL')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (32, 3, N'RETAINED EARNINGS-PRIOR YEARS P&L')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (33, 3, N'CURRENT YEAR NET INCOME/(LOSS)')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (34, 4, N'REALIZED GAIN/(LOSS)')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (35, 4, N'CHANGE IN UNREALIZED GAIN/(LOSS)')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (36, 4, N'DIVIDEND INCOME')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (37, 4, N'FOREIGN WITHHOLDING TAX')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (38, 4, N'INTEREST INCOME ( Fixed Income Coupon )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (39, 4, N'Interest Income on  PB Balances')

INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (40, 5, N'DIVIDEND EXPENSE')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (41, 5, N'INTEREST EXPENSE ( Fixed Income Coupons )')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (42, 5, N'Interest Expense of PB Balances')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (43, 5, N'STOCK BORROW FEES')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (44, 5, N'EMPLOYEE COMPENSATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (45, 5, N'Expenses Paid')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (46, 5, N'AMORTIZATION AND DEPRECIATION')
INSERT [dbo].[account_type] ([id], [account_category_id], [name]) VALUES (47, 0, N'Dummy Type')

SET IDENTITY_INSERT [dbo].[account_type] OFF

--dummy account
INSERT INTO [dbo].[account]([name],[description],[account_type_id]) VALUES('Dummy Account','Default Account',(select top 1 id from account_type where account_category_id = 0))

-- server side filters
delete from server_side_filter_config
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'fund','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'symbol','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'AccountCategory','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'AccountType','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'AccountName','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'fx_currency','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'CustodianCode','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'SecurityType','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Side','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Action','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Event','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Status','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'source','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'Source','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'event','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'TradeId','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'LongShort','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'TradeCurrency','vwFullJournal','vwFullJournal','Journals Ledgers')
INSERT INTO [server_side_filter_config]([created_by],[created_date],[last_updated_by],[last_updated_date],[col_name],[source],[meta_info],[grid_name]) VALUES('sa',GETDATE(),NULL,NULL,'SettleCurrency','vwFullJournal','vwFullJournal','Journals Ledgers')


-- default layouts
delete from [data_grid_layouts]

SET IDENTITY_INSERT [dbo].[data_grid_layouts] ON 
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (2, 7, N'Trade', N'trades', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":232,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"myName","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"LPOrderId","hide":false,"aggFunc":null,"width":270,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccrualId","hide":false,"aggFunc":null,"width":110,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Symbol","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Quantity","hide":false,"aggFunc":null,"width":122,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TimeInForce","hide":false,"aggFunc":null,"width":125,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderType","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"BloombergCode","hide":false,"aggFunc":null,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"EzeTicker","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityCode","hide":false,"aggFunc":null,"width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ExecutionBroker","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fund","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PMCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PortfolioCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Trader","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettlePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionCategory","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentOrderId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentSymbol","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Commission","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fees","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderSource","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"UpdatedOn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"LocalNetNotional","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"TradeDate","sort":"asc"}]', N'{}', N'{}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (3, 1, N'Journals Ledgers', N'Testing Events', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":402,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":true,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"debit","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"desc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"BJRI","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (4, 1, N'Journals Ledgers', N'Default', 1, N'false', N'[{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":true,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":true,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"debit","hide":false,"aggFunc":"sum","width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (5, 1, N'Journals Ledgers', N'TOP Level NAV', 1, N'false', N'[{"colId":"Side","hide":true,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":true,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":true,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":true,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":330,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":144,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (6, 1, N'Journals Ledgers', N'Bobby-Default', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (7, 1, N'Journals Ledgers', N'Bobby-NAV', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":488,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"bb fp","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"2019-04-01","endDate":"2019-12-31"}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (8, 1, N'Journals Ledgers', N'Bobby-Balance Sheet', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"AccountCategory","sort":"desc"}]', N'{"AccountCategory":{"values":["Asset","Liability","Equity"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (9, 1, N'Journals Ledgers', N'Bobby-Income Statement', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"ag-Grid-AutoColumn","sort":"asc"}]', N'{"AccountCategory":{"values":["Expenses","Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (10, 1, N'Journals Ledgers', N'Bobby-Currency Balances', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"AccountType","sort":"asc"}]', N'{"AccountCategory":{"values":["Asset","Liability","Revenues"],"filterType":"set"},"AccountType":{"values":["Settled Cash","DUE FROM/(TO) PRIME BROKERS ( Unsettled Activity )","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (11, 1, N'Journals Ledgers', N'Bobby-Swaps', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":465,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"AccountType","hide":false,"aggFunc":null,"width":387,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"accountName","hide":false,"aggFunc":null,"width":425,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":261,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"accountName","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (12, 1, N'Journals Ledgers', N'Bobby PnL Decomposition', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":506,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":96,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"balance","sort":"asc"}]', N'{"AccountCategory":{"values":["Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (13, 1, N'Journals Ledgers', N'Bobby Currency PnL Decomposition', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":506,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":96,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"balance","sort":"asc"}]', N'{"AccountCategory":{"values":["Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (14, 1, N'Journals Ledgers', N'Nav', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":151,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":386,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":111,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (15, 1, N'Journals Ledgers', N'Balance Sheet', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":151,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":386,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":111,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Equity","Liability"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (16, 1, N'Journals Ledgers', N'Income Statement', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":151,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":386,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":111,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Expenses","Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (17, 1, N'Journals Ledgers', N'Trial Balance', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":86,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":126,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":129,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":136,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":119,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":94,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":92,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":141,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 1)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (18, 1, N'Journals Ledgers', N'Bobby-Symbol Activity', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":458,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":96,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccountType","hide":false,"aggFunc":null,"width":330,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":465,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":117,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":271,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":3}]', N'[]', N'[{"colId":"when","sort":"desc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (19, 1, N'Journals Ledgers', N'Realized Gain/Loss', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":421,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Revenues"],"filterType":"set"},"AccountType":{"values":["REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","fx gain or loss on settled balance","fx gain or loss on unsettled balance","Settled Cash"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (20, 1, N'Journals Ledgers', N'Bobby-Activity by Type', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":297,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":false,"aggFunc":null,"width":177,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":5},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":144,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"security_id","hide":false,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":118,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":2}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (21, 1, N'Journals Ledgers', N'Bobby-Mkt Value', 1, N'false', N'[{"colId":"TradeDate","hide":true,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":408,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"AccountCategory","sort":"asc"}]', N'{"AccountType":{"values":["FX MARK TO MARKET ON STOCK COST (SHORTS)","FX MARKET TO MARKET ON STOCK COST","Mark to Market Derivatives Contracts at Fair Value (Assets)","Mark to Market Derivatives Contracts at Fair Value (Liabilities)","Mark to Market Longs","Mark to Market Shorts","Mark to Market longs fx translation gain or loss","Mark to Market shorts fx translation gain or loss","LONG POSITIONS AT COST","ACCRUED EXPENSES","CHANGE IN UNREALIZED GAIN/(LOSS)","CONTRIBUTED CAPITAL","Change in Unrealized Derivatives Contracts at Fair Value","Change in Unrealized Derivatives Contracts due to FX Translation","Change in unrealized due to fx on original Cost","Expenses Paid","Net Income 2019","PREPAID EXPENSES","REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","SHORT POSITIONS AT COST","change in unrealized do to fx translation","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"},"AccountCategory":{"values":["Asset","Liability","Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"ILPT","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (22, 1, N'Journals Ledgers', N'Bobby-Citco Pos&Mkt Value', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":450,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountType":{"values":["ACCRUED EXPENSES","CHANGE IN UNREALIZED GAIN/(LOSS)","CONTRIBUTED CAPITAL","Change in Unrealized Derivatives Contracts at Fair Value","Change in Unrealized Derivatives Contracts due to FX Translation","Change in unrealized due to fx on original Cost","Expenses Paid","FX MARK TO MARKET ON STOCK COST (SHORTS)","FX MARKET TO MARKET ON STOCK COST","LONG POSITIONS AT COST","Mark to Market Derivatives Contracts at Fair Value (Assets)","Mark to Market Derivatives Contracts at Fair Value (Liabilities)","Mark to Market Longs","Mark to Market Shorts","Mark to Market longs fx translation gain or loss","Mark to Market shorts fx translation gain or loss","Net Income 2019","PREPAID EXPENSES","REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","SHORT POSITIONS AT COST","change in unrealized do to fx translation","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"byg ln","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (23, 1, N'Journals Ledgers', N'Citco Long Rec', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":450,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccountType","hide":false,"aggFunc":null,"width":85,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"SecurityType","sort":"desc"}]', N'{"Side":{"values":["SHORT","SELL","BUY"],"filterType":"set"},"AccountType":{"values":["ACCRUED EXPENSES","CHANGE IN UNREALIZED GAIN/(LOSS)","CONTRIBUTED CAPITAL","Change in Unrealized Derivatives Contracts at Fair Value","Change in Unrealized Derivatives Contracts due to FX Translation","Change in unrealized due to fx on original Cost","Expenses Paid","FX MARK TO MARKET ON STOCK COST (SHORTS)","FX MARKET TO MARKET ON STOCK COST","LONG POSITIONS AT COST","Mark to Market Derivatives Contracts at Fair Value (Assets)","Mark to Market Derivatives Contracts at Fair Value (Liabilities)","Mark to Market Longs","Mark to Market Shorts","Mark to Market longs fx translation gain or loss","Mark to Market shorts fx translation gain or loss","Net Income 2019","PREPAID EXPENSES","REALIZED GAIN/(LOSS)","REALIZED GAIN/(LOSS) DUE TO FX","SHORT POSITIONS AT COST","change in unrealized do to fx translation","fx gain or loss on settled balance","fx gain or loss on unsettled balance"],"filterType":"set"},"AccountCategory":{"values":["Asset"],"filterType":"set"},"SecurityType":{"values":["Common Stock","REIT","Unit","Open-End Fund","Cash","Equity Option"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":false,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (24, 1, N'Journals Ledgers', N'Citco - Derivs', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":463,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"AccountType","hide":false,"aggFunc":null,"width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":5},{"colId":"accountName","hide":false,"aggFunc":null,"width":175,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":124,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"AccountCategory":{"values":["Asset","Liability","Equity","Expenses"],"filterType":"set"},"SecurityType":{"values":["CROSS","Equity Swap","FORWARD"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (26, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"event","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{"TradeId":{"filterType":"text","type":"contains","filter":"da474"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (27, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"event","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (28, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"event","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{"TradeId":{"filterType":"text","type":"contains","filter":"fe65c"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (29, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"Side","hide":false,"aggFunc":null,"width":65,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":97,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":105,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (30, 1, N'Journals Ledgers', N'Bobby-Activity Rec', 1, N'false', N'[{"colId":"Side","hide":false,"aggFunc":null,"width":65,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":97,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":58,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":240,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":78,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountType","hide":false,"aggFunc":null,"width":249,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":true,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":123,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountName","hide":true,"aggFunc":null,"width":382,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":112,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":105,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"when","sort":"asc"}]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"","endDate":""}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (32, 19, N'Taxlot Status', N'Brian''s View', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":204,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"open_id","hide":true,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"trade_date","hide":false,"aggFunc":null,"width":118,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"original_quantity","hide":false,"aggFunc":"sum","width":135,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":false,"aggFunc":"sum","width":136,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"investment_at_cost","hide":false,"aggFunc":null,"width":161,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"status":{"values":["Open","Partially Closed"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","dateFilter":{"startDate":"2020-01-01","endDate":"2020-01-01"}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (34, 7, N'Trade', N'Jon New', 1, N'false', N'[{"colId":"TradeTime","hide":true,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"LPOrderId","hide":false,"aggFunc":null,"width":270,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"AccrualId","hide":false,"aggFunc":null,"width":110,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Symbol","hide":false,"aggFunc":null,"width":102,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Quantity","hide":false,"aggFunc":null,"width":122,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TimeInForce","hide":false,"aggFunc":null,"width":125,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderType","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"BloombergCode","hide":false,"aggFunc":null,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"EzeTicker","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityCode","hide":false,"aggFunc":null,"width":130,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ExecutionBroker","hide":false,"aggFunc":null,"width":146,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fund","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PMCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"PortfolioCode","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Trader","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleCurrency","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettlePrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleDate","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionCategory","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TransactionType","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentOrderId","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"ParentSymbol","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Commission","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Fees","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetMoney","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"NetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SettleNetPrice","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"OrderSource","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"UpdatedOn","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"LocalNetNotional","hide":false,"aggFunc":null,"width":200,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[{"colId":"TradeDate","sort":"asc"}]', N'{}', N'{"symbolFilter":"gil"}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (36, 1, N'Journals Ledgers', N'Bobby-CFD Equity Swaps', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":540,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"AccountType","hide":false,"aggFunc":null,"width":387,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"accountName","hide":false,"aggFunc":null,"width":139,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":106,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"debit","hide":false,"aggFunc":"sum","width":125,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":128,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":122,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":147,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{"SecurityType":{"values":["Equity Swap"],"filterType":"set"},"AccountCategory":{"values":["Revenues"],"filterType":"set"}}', N'{"fundFilter":"All Funds","symbolFilter":"","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"2019-04-01","endDate":"2019-12-31"}}', 0, 0)
INSERT [dbo].[data_grid_layouts] ([id], [grid_id], [grid_name], [grid_layout_name], [userId], [pivot_mode], [column_state], [group_state], [sort_state], [filter_state], [external_filter_state], [is_public], [is_default]) VALUES (37, 1, N'Journals Ledgers', N'CFD-Rec', 1, N'false', N'[{"colId":"ag-Grid-AutoColumn","hide":false,"aggFunc":null,"width":491,"pivotIndex":null,"pinned":"left","rowGroupIndex":null},{"colId":"TradeDate","hide":false,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":1},{"colId":"SettleDate","hide":true,"aggFunc":null,"width":156,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"id","hide":false,"aggFunc":null,"width":71,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"source","hide":false,"aggFunc":null,"width":300,"pivotIndex":null,"pinned":null,"rowGroupIndex":0},{"colId":"fund","hide":false,"aggFunc":null,"width":87,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"AccountCategory","hide":false,"aggFunc":null,"width":108,"pivotIndex":null,"pinned":null,"rowGroupIndex":3},{"colId":"AccountType","hide":false,"aggFunc":null,"width":415,"pivotIndex":null,"pinned":null,"rowGroupIndex":4},{"colId":"accountName","hide":false,"aggFunc":null,"width":491,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"accountDescription","hide":false,"aggFunc":null,"width":168,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"when","hide":false,"aggFunc":null,"width":89,"pivotIndex":null,"pinned":null,"rowGroupIndex":2},{"colId":"debit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"credit","hide":false,"aggFunc":"sum","width":140,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"balance","hide":false,"aggFunc":"sum","width":137,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"quantity","hide":true,"aggFunc":"sum","width":115,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"symbol","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":6},{"colId":"fxrate","hide":false,"aggFunc":null,"width":99,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"event","hide":false,"aggFunc":null,"width":90,"pivotIndex":null,"pinned":null,"rowGroupIndex":5},{"colId":"security_id","hide":false,"aggFunc":null,"width":116,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"fx_currency","hide":false,"aggFunc":null,"width":120,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"value","hide":false,"aggFunc":null,"width":88,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"start_price","hide":false,"aggFunc":null,"width":114,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"end_price","hide":false,"aggFunc":null,"width":109,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"is_account_to","hide":false,"aggFunc":null,"width":131,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"TradeId","hide":false,"aggFunc":null,"width":100,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Action","hide":false,"aggFunc":null,"width":95,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Status","hide":false,"aggFunc":null,"width":93,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"CustodianCode","hide":false,"aggFunc":null,"width":142,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"SecurityType","hide":false,"aggFunc":null,"width":127,"pivotIndex":null,"pinned":null,"rowGroupIndex":null},{"colId":"Side","hide":false,"aggFunc":null,"width":83,"pivotIndex":null,"pinned":null,"rowGroupIndex":null}]', N'[]', N'[]', N'{}', N'{"fundFilter":"All Funds","symbolFilter":"bga au","zeroBalanceFilter":0,"absoluteSortingModel":{"sortingApplied":false,"sortingOn":[]},"dateFilter":{"startDate":"2019-04-01","endDate":"2019-12-31"}}', 0, 0)
SET IDENTITY_INSERT [dbo].[data_grid_layouts] OFF

SET IDENTITY_INSERT [dbo].[tax_rate] ON 
INSERT [dbo].[tax_rate] ([Id], [effective_from], [effective_to], [long_term_tax_rate], [short_term_tax_rate], [short_term_period], [created_date], [last_updated_date], [created_by], [last_updated_by], [active_flag]) VALUES (1, CAST(N'2019-01-01T00:00:00.000' AS DateTime), CAST(N'2019-12-31T00:00:00.000' AS DateTime), CAST(0.200000000 AS Decimal(16, 9)), CAST(0.396000000 AS Decimal(16, 9)), 365, CAST(N'2019-12-23T08:27:49.013' AS DateTime), CAST(N'2019-12-26T09:48:04.360' AS DateTime), N'John Smith', N'John Smith', 1)
INSERT [dbo].[tax_rate] ([Id], [effective_from], [effective_to], [long_term_tax_rate], [short_term_tax_rate], [short_term_period], [created_date], [last_updated_date], [created_by], [last_updated_by], [active_flag]) VALUES (2, CAST(N'2020-01-01T00:00:00.000' AS DateTime), CAST(N'2020-12-31T00:00:00.000' AS DateTime), CAST(0.200000000 AS Decimal(16, 9)), CAST(0.396000000 AS Decimal(16, 9)), 365, CAST(N'2019-12-23T08:27:49.013' AS DateTime), CAST(N'2019-12-26T09:48:04.360' AS DateTime), N'John Smith', N'John Smith', 1)
SET IDENTITY_INSERT [dbo].[tax_rate] OFF


-- DONE

RETURN 0
GO
PRINT N'Creating [dbo].[AssetServicesOptions]...';


GO
CREATE PROCEDURE [dbo].[AssetServicesOptions]
@date date
AS
begin tran
IF OBJECT_ID('tempdb..##taxReport' , 'U') IS NULL
begin
	select *
	into ##taxReport
	from fnTaxLotReport(@date)
end
else
begin
	if not exists (select top 1 * from ##taxReport where report_date = @date)
	begin
		insert into ##taxReport select * from fnTaxLotReport(@date)
	end
end
commit

select s.EzeTicker, --not sure
cts.TradeDate,
cts.Side,
cts.TradeCurrency,
'N/A' as option_type,
'N/A' as option_underlier,
null as expiration_date,
0 as strike, --not sure
tl.quantity,
c.cost_basis,
(tl.quantity * c.cost_basis) as premium_paid,
mp.price as option_last_price, --not sure
(mp.price * tl.quantity) as current_option_premium,
(mp.price - c.cost_basis) as gain_loss,
mp.price as underlying_closing_price, --not sure
0 as moniness, --not sure
'In Money' as [status], -- not sure
7 as days_to_expire, -- not sure
1.25 as option_decay, --not sure
250000 as decay, --not sure
35714 as daily_decay, --not sure
0 as underlying_exercise_price, -- not sure
0 as underlying_quantity, -- not sure
0 as underlying_exposure, --not sure
cts.CustodianCode
into #assetservices
from fnTaxLotReport(@date) tl
inner join [SecurityMaster]..security s on tl.symbol = s.ezeticker
inner join current_trade_state cts on cts.LPOrderId = tl.open_id
left join market_prices mp on mp.security_id = s.SecurityId and mp.business_date = @date and mp.event = 'eod'
left join cost_basis c on c.symbol = tl.symbol and c.business_date = tl.business_date
where cts.Side in ('BUY', 'SELL')
-- and cts.SecurityType = 'Equity Option'

select * from #assetservices where side = 'BUY'
select * from #assetservices where side = 'SELL'

RETURN 0
GO
PRINT N'Creating [dbo].[DividendDetails]...';


GO
CREATE PROCEDURE [dbo].[DividendDetails]
	@executionDate datetime,
	@dividendId int null
AS
select t.fund,
d.id,
t.symbol,
t.quantity,
t.fx_rate,
d.currency,
d.execution_date,
abs(t.quantity * d.rate) as base_gross_dividend,
abs(t.quantity * d.rate) * (d.withholding_rate /100) as base_withholding_amount,
abs(t.quantity * d.rate) + (abs(t.quantity * d.rate) * (d.withholding_rate /100)) as base_net_dividend,
abs(t.quantity * d.rate) * d.fx_rate as settlement_gross_dividend,
abs(t.quantity * d.rate) * (d.withholding_rate /100) * d.fx_rate as settlement_withholdings_amount,
abs(t.quantity * d.rate) * d.fx_rate * d.fx_rate as settlement_local_net_dividend
from fnTaxLotReport(@executionDate) t
inner join cash_dividends d on t.symbol = d.symbol and
case when @dividendId is null
then 1 
when @dividendId = d.id
then 1
else 0
end = 1
and d.active_flag = 1
and d.execution_date <= GETDATE()
and t.trade_date <= d.execution_date
and (t.status = 'open' or t.status = 'partially closed') 
and (t.side = 'buy' or t.side = 'short')
RETURN 0
GO
PRINT N'Creating [dbo].[HistoricPerformance]...';


GO
/*
truncate table pnl_summary
select busdate, count(*) from pnl_summary with(nolock)
group by busDate
order by busDate desc

select * from pnl_summary where BusDate = '2019-12-31'
exec [HistoricPerformance] '2019-12-31', '2019-12-31'

select count(*) from current_journal_full
*/
CREATE PROCEDURE [dbo].[HistoricPerformance]
	@Now Date,
	@From Date
AS

-- Make sure its updated
Exec PeriodPnl @Now

RAISERROR('Completed', 0,1) with nowait

select [when], sum(coalesce(credit,0) - coalesce(debit,0)) as balance 
into #contributed
from current_journal_full 
where AccountType in ('CONTRIBUTED CAPITAL')
group by [when]

select [when], sum(coalesce(credit,0) - coalesce(debit,0)) as balance
into #withdraw
from current_journal_full 
where AccountType in ('WITHDRAWN CAPITAL')
group by [when]

select BusDate, 
	sum(DayPnl) as DayPnl, 
	Sum(Nav) as SodNav, 
--	sum(DayPnl) / Sum(Nav) as DayPnlPer, 
--	Sum(WtdPnl) / Sum(Nav) as WtdPnlPer, 
--	Sum(MtdPnl) / Sum(Nav) as MtdPnlPer, 
--	Sum(QtdPnl) / Sum(Nav) as QtdPnlPer, 
--	Sum(YtdPnl) / Sum(Nav) as YtdPnlPer, 
--	Sum(ItdPnl) / Sum(Nav) as ItdPnlPer,
	Sum(WtdPnl) WtdPnl, 
	Sum(MtdPnl) MtdPnl, 
	Sum(QtdPnl) QtdPnl, 
	Sum(YtdPnl) YtdPnl, 
	Sum(ItdPnl) ItdPnl
into #pnl_summary
from pnl_summary
where BusDate between @From and @Now
group by BusDate
order by BusDate desc

/*
WTD Calcs, need to ensure that the pnl_summary table is populated
0 as WtdPnlPer, 
0 as WtdPnlr, 
*/

select BusDate as AsOf, 
	DayPnl, 
	SodNav, 
	SodNav + coalesce(w.balance,0) + coalesce(c.balance,0) as EodNav, 
	coalesce(w.balance,0) as Withdrawls, 
	coalesce(c.balance,0) as Contributions, 
	DayPnl / (SodNav + coalesce(w.balance,0) + coalesce(c.balance,0))  as DayPnlPer, 
	0 as WtdPnlPer, 
	0 as MtdPnlPer, 
	0 as QtdPnlPer, 
	0 as YtdPnlPer, 
	0 as ItdPnlPer,
	WtdPnl, 
	MtdPnl, 
	QtdPnl, 
	YtdPnl, 
	ItdPnl
from #pnl_summary with(nolock) 
left outer join #contributed c on c.[when] = BusDate
left outer join #withdraw w on w.[when] = BusDate
where BusDate between @From and @Now
order by BusDate desc

RETURN 0
GO
PRINT N'Refreshing [dbo].[PullDividends]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[PullDividends]';


GO
PRINT N'Refreshing [dbo].[DayPnlReconcile]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[DayPnlReconcile]';


GO
PRINT N'Refreshing [dbo].[DetailPnlToDate]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[DetailPnlToDate]';


GO
PRINT N'Refreshing [dbo].[PostProcessETL]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[PostProcessETL]';


GO
PRINT N'Refreshing [dbo].[SyncManualJournal]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[SyncManualJournal]';


GO
PRINT N'Refreshing [dbo].[TaxLotReport]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[TaxLotReport]';


GO
PRINT N'Refreshing [dbo].[UpdateManualJournal]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[UpdateManualJournal]';


GO
PRINT N'Refreshing [dbo].[CostBasisCalculation]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[CostBasisCalculation]';


GO
PRINT N'Refreshing [dbo].[PeriodJournals]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[PeriodJournals]';


GO
PRINT N'Refreshing [dbo].[PrepareRun]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[PrepareRun]';


GO
PRINT N'Refreshing [dbo].[ClosingTaxLot]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[ClosingTaxLot]';


GO
PRINT N'Refreshing [dbo].[DayOverDayIncome]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[DayOverDayIncome]';


GO
PRINT N'Refreshing [dbo].[RunStats]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[RunStats]';


GO
PRINT N'Refreshing [dbo].[EndOfYear]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[EndOfYear]';


GO
PRINT N'Refreshing [dbo].[BookmonReconcile]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[BookmonReconcile]';


GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [dbo].[symbol_change_audit] WITH CHECK CHECK CONSTRAINT [FK_symbol_change_audit_Tosymbol_change];


GO
PRINT N'Update complete.';


GO
