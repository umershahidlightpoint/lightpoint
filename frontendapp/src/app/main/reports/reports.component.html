<!------- Hide Grid Div Starts ------->
<div *ngIf="hideGrid" #logScroll [ngStyle]="processingMsgDiv">
  <div style="display: flex; align-items: center; justify-content: center">
    <h1> Posting Engine is Running. Please Wait. </h1>
  </div>
</div>
<!------- Hide Grid Div Ends ------->


<!------- Div Starts ------->
<div [ngStyle]="{ 'display': hideGrid ? 'none' : 'initial' } ">
  <!------- Tab View Tag Starts ------->
  <p-tabView [ngStyle]="style">
    <!------- Trial Balance Report Tab Starts ------->
    <p-tabPanel #trialBalance header="Trial Balance Report" [ngStyle]="style">
      <!-------  Div Starts ------->
      <div class="row ">
        <!------- Fund Dropdown Div Starts ------->
        <div class="col-md-2">
          <select class="form-control" [(ngModel)]="fund" (ngModelChange)="changeFund($event)">
            <option selected>All Funds</option>
            <option *ngFor="let fund of funds" [ngValue]="fund.fundCode">
              {{ fund.fundCode }}
            </option>
          </select>
        </div>
        <!------- Fund Dropdown Div Ends ------->

        <!------- DateRange Label Div Starts ------->
        <div>
          <label style="text-align: right"> {{ DateRangeLable }} </label>
        </div>
        <!------- DateRange Label Div Ends ------->

        <!------- Date Picker Div Starts ------->
        <div class="col-md-5">
          <form>
            <input type="text" autocomplete="off" ngxDaterangepickerMd [(ngModel)]="selected" [ranges]="ranges"
              [showCustomRangeLabel]="true" #dateRangPicker name="selectedDaterange" [showClearButton]="true"
              placeholder="Choose date" [alwaysShowCalendars]="false" (ngModelChange)="changeDate($event)"
              class="form-control" />
          </form>
        </div>
        <!------- Date Picker Div Ends ------->

        <!------- Clear Button Div Starts ------->
        <div class="col-md-3">
          <button (click)="clearFilters()" class="btn btn-info" type="button">
            <i class="fa fa-remove"></i> Clear
          </button>
        </div>
        <!------- Clear Button Div Ends ------->

        <!------- Refresh Button Div Starts ------->
        <div class="ml-auto mr-3">
          <button (click)="refreshReport()" class="btn btn-info" tooltip="Refresh" placement="top">
            <i class="fa fa-refresh"></i></button>
        </div>
        <!------- Refresh Button Div Ends ------->

      </div>
      <!------- Div Ends ------->

      <!------- Grid Div Starts ------->
      <div #divToMeasure>
        <!------- Style For Height Div Starts ------->
        <div [ngStyle]="styleForHight">
          <!------- Refresh Spinne Div Starts ------->
          <div *ngIf="isLoading" class="refresh-spinner">
            <h5>Loading...</h5>
          </div>
          <!------- Refresh Spinne Div Starts ------->

          <!------- Table Tag for Headings Starts ------->
          <table class="table table-sm table-striped table-bordered table-secondary table-header">
            <thead>
              <tr>
                <th scope="col" class="first-cell">Account Name</th>
                <th scope="col" class="other-cells center-position">Debit</th>
                <th scope="col" class="other-cells center-position">Credit</th>
              </tr>
            </thead>
          </table>
          <!------- Table Tag for Headings Ends ------->

          <!------- Trial Report Div Starts ------->
          <div #trialReport [ngStyle]="containerDiv">
            <!------- Table Tag for Data Starts ------->
            <table class="table table-sm table-striped table-bordered">
              <tbody>
                <tr *ngFor="let report of trialBalanceReport; let i = index">
                  <td class="first-cell cell-style"> {{ report.accountName }}</td>
                  <td [ngStyle]="{'background-size.%': !report.debitPercentage ? 0 : report.debitPercentage}"
                    style='background-size: 100%' class="other-cells negative cell-style">
                    {{ report.debit | number: '1.2-2' }}
                  </td>
                  <td [ngStyle]="{'background-size.%': !report.creditPercentage ? 0 : report.creditPercentage}"
                    style='background-size: 100%' class="other-cells positive cell-style">
                    {{ report.credit | number: '1.2-2' }}</td>
                </tr>
              </tbody>
            </table>
            <!------- Table Tag for Data Ends ------->
          </div>
          <!------- Trial Report Div Ends ------->

          <!------- Table Tag for Footer Starts ------->
          <table class="table table-sm table-striped table-bordered table-secondary table-footer">
            <tfoot>
              <tr>
                <td class="first-cell">Total</td>
                <td class="other-cells end-position">
                  {{ trialBalanceReportStats?.totalDebit | number: '1.2-2' }}</td>
                <td class="other-cells end-position">
                  {{ trialBalanceReportStats?.totalCredit | number: '1.2-2' }}</td>
              </tr>
              <tr>
                <td class="first-cell">Balance</td>
                <td colspan="2" class="other-cells center-position"
                  [ngClass]="{'wrong-balance': (trialBalanceReportStats?.totalCredit - trialBalanceReportStats?.totalDebit) !== 0}">
                  {{ (trialBalanceReportStats?.totalCredit - trialBalanceReportStats?.totalDebit) | number: '1.2-2' }}
                </td>
              </tr>
            </tfoot>
          </table>
          <!------- Table Tag for Footer Ends ------->

        </div>
        <!------- Style For Height Div Ends------->
      </div>
      <!------- Grid Div Ends------->

    </p-tabPanel>
    <!------- Trial Balance Report Tab Ends------->

  </p-tabView>
  <!------- Tab View Tag Starts ------->
</div>
<!------- Div Ends------->